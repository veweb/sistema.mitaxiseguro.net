<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>28.4. View Helpers</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Guía de Referencia del Programador">
<link rel="up" href="zend.view.html" title="Chapter 28. Zend_View">
<link rel="prev" href="zend.view.scripts.html" title="28.3. View Scripts">
<link rel="next" href="zend.xmlrpc.html" title="Chapter 29. Zend_XmlRpc">
<link rel="chapter" href="zend.html" title="Chapter 1. Zend">
<link rel="chapter" href="zend.acl.html" title="Chapter 2. Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="Chapter 3. Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="Chapter 4. Zend_Cache">
<link rel="chapter" href="zend.config.html" title="Chapter 5. Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="Chapter 6. Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="Chapter 7. Zend_Controller">
<link rel="chapter" href="zend.date.html" title="Chapter 8. Zend_Date">
<link rel="chapter" href="zend.db.html" title="Chapter 9. Zend_Db">
<link rel="chapter" href="zend.feed.html" title="Chapter 10. Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="Chapter 11. Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="Chapter 12. Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="Chapter 13. Zend_Http">
<link rel="chapter" href="zend.json.html" title="Chapter 14. Zend_Json">
<link rel="chapter" href="zend.locale.html" title="Chapter 15. Zend_Locale">
<link rel="chapter" href="zend.log.html" title="Chapter 16. Zend_Log">
<link rel="chapter" href="zend.mail.html" title="Chapter 17. Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="Chapter 18. Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="Chapter 19. Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="Chapter 20. Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="Chapter 21. Zend_Rest">
<link rel="chapter" href="zend.search.html" title="Chapter 22. Zend_Search">
<link rel="chapter" href="zend.server.html" title="Chapter 23. Zend_Server">
<link rel="chapter" href="zend.service.html" title="Chapter 24. Zend_Service">
<link rel="chapter" href="zend.session.html" title="Chapter 25. Zend_Session">
<link rel="chapter" href="zend.uri.html" title="Chapter 26. Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="Chapter 27. Zend_Validate">
<link rel="chapter" href="zend.view.html" title="Chapter 28. Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="Chapter 29. Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="Appendix A. Zend Framework PHP Coding Standard">
<link rel="appendix" href="copyrights.html" title="Appendix B. Copyright Information">
<link rel="index" href="the.index.html" title="Index">
<link rel="subsection" href="zend.view.helpers.html#zend.view.helpers.initial" title="28.4.1. Initial Helpers">
<link rel="subsection" href="zend.view.helpers.html#zend.view.helpers.paths" title="28.4.2. Helper Paths">
<link rel="subsection" href="zend.view.helpers.html#zend.view.helpers.custom" title="28.4.3. Writing Custom Helpers">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">28.4. View Helpers</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.view.scripts.html">Prev</a> </td>
<th width="60%" align="center">Chapter 28. Zend_View</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.xmlrpc.html">Next</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.view.helpers"></a>28.4. View Helpers</h2></div></div></div>
<p>
        In your view scripts, often it is necessary to perform certain
        complex functions over and over; e.g., formatting a date,
        generating form elements, or displaying action links.  You can
        use helper classes to perform these behaviors for you.
    </p>
<p>
        To use a helper in your view script, call it using
        $this-&gt;helperName(). Behind the scenes, Zend_View will load the
        Zend_View_Helper_HelperName class, create an object instance of
        it, and call its helperName() method.  The object instance is
        persistent within the Zend_View instance, and is reused for all
        future calls to $this-&gt;helperName().
    </p>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.view.helpers.initial"></a>28.4.1. Initial Helpers</h3></div></div></div>
<p>
            Zend_View comes with an initial set of helper classes, all of
            which relate to form element generation.  They each perform the
            appopriate output escaping automatically.  They are:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                formButton($name, $value, $attribs): Creates an &lt;input
                type="button" /&gt; element.
            </p></li>
<li><p>
                formCheckbox($name, $value, $attribs, $options): Creates
                an &lt;input type="checkbox" /&gt; element.  The
                $options param is an array where the first value is the
                "checked" value, and the second is the "unchecked" value
                (the defaults are '1' and '0').  If $value matches the
                "checked" value, the box will be checked for you.
            </p></li>
<li><p>
                formFile($name, $value, $attribs): Creates an &lt;input
                type="file" /&gt; element.
            </p></li>
<li><p>
                formHidden($name, $value, $attribs): Creates an &lt;input
                type="hidden" /&gt; element.
            </p></li>
<li><p>
                formPassword($name, $value, $attribs): Creates an &lt;input
                type="password" /&gt; element.
            </p></li>
<li><p>
                formRadio($name, $value, $attribs, $options): Creates a
                series of &lt;input type="radio" /&gt; elements, one for
                each of the $options elements.  In the $options array, the
                element key is the radio value, and the element value is the
                radio label.  The $value radio will be preselected for you.
            </p></li>
<li><p>
                formReset($name, $value, $attribs): Creates an &lt;input
                type="reset" /&gt; element.
            </p></li>
<li><p>
                formSelect($name, $value, $attribs, $options): Creates a
                &lt;select&gt;...&lt;/select&gt; block, with one
                &lt;option&gt;one for each of the $options elements.  In
                the $options array, the element key is the option value,
                and the element value is the option label.  The $value
                option(s) will be preselected for you.
            </p></li>
<li><p>
                formSubmit($name, $value, $attribs): Creates an &lt;input
                type="submit" /&gt; element.
            </p></li>
<li><p>
                formText($name, $value, $attribs): Creates an &lt;input
                type="text" /&gt; element.
            </p></li>
<li><p>
                formTextarea($name, $value, $attribs): Creates a
                &lt;textarea&gt;...&lt;/textarea&gt; block.
            </p></li>
</ul></div>
<p>
            Using these in your view scripts is very easy, here is an example.
            Note that you all you need to do is call them; they will load
            and instantiate themselves as they are needed.
        </p>
<pre class="programlisting">&lt;?php
// inside your view script, $this refers to the Zend_View instance.
// 
// say that you have already assigned a series of select options under
// the name $countries as array('us' =&gt; 'United States', 'il' =&gt;
// 'Israel', 'de' =&gt; 'Germany').
?&gt;
&lt;form action="action.php" method="post"&gt;
    &lt;p&gt;&lt;label&gt;Your Email:
        &lt;?php echo $this-&gt;formText('email', 'you@example.com', array('size' =&gt; 32)) ?&gt;
    &lt;/label&gt;&lt;/p&gt;
    &lt;p&gt;&lt;label&gt;Your Country:
        &lt;?php echo $this-&gt;formSelect('country', 'us', null, $this-&gt;countries) ?&gt;
    &lt;/label&gt;&lt;/p&gt;
    &lt;p&gt;&lt;label&gt;Would you like to opt in?
        &lt;?php echo $this-&gt;formCheckbox('opt_in', 'yes', null, array('yes', 'no')) ?&gt;
    &lt;/label&gt;&lt;/p&gt;
&lt;/form&gt;
        </pre>
<p>
            The resulting output from the view script will look something like this:
        </p>
<pre class="programlisting">&lt;form action="action.php" method="post"&gt;
    &lt;p&gt;&lt;label&gt;Your Email:
        &lt;input type="text" name="email" value="you@example.com" size="32" /&gt;
    &lt;/label&gt;&lt;/p&gt;
    &lt;p&gt;&lt;label&gt;Your Country:
        &lt;select name="country"&gt;
            &lt;option value="us" selected="selected"&gt;United States&lt;/option&gt;
            &lt;option value="il"&gt;Israel&lt;/option&gt;
            &lt;option value="de"&gt;Germany&lt;/option&gt;
        &lt;/select&gt;
    &lt;/label&gt;&lt;/p&gt;
    &lt;p&gt;&lt;label&gt;Would you like to opt in?
        &lt;input type="hidden" name="opt_in" value="no" /&gt;
        &lt;input type="checkbox" name="opt_in" value="yes" checked="checked" /&gt;
    &lt;/label&gt;&lt;/p&gt;
&lt;/form&gt;
        </pre>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.view.helpers.paths"></a>28.4.2. Helper Paths</h3></div></div></div>
<p>
            As with view scripts, your controller can specify a stack of
            paths for Zend_View to search for helper classes. By
            default, Zend_View looks in "Zend/View/Helper/*" for helper
            classes. You can tell Zend_View to look in other locations
            using the setHelperPath() and addHelperPath() methods.
        </p>
<pre class="programlisting">&lt;?php
$view = new Zend_View();
$view-&gt;setHelperPath('/path/to/more/helpers');
?&gt;
        </pre>
<p>
            In fact, you can "stack" paths using the addHelperPath()
            method. As you add paths to the stack, Zend_View will look
            at the most-recently-added path for the requested helper
            class.  This allows you to add to (or even override) the
            initial distribution of helpers with your own custom
            helpers.
        </p>
<pre class="programlisting">&lt;?php
$view = new Zend_View();
$view-&gt;addHelperPath('/path/to/some/helpers');
$view-&gt;addHelperPath('/other/path/to/helpers');

// now when you call $this-&gt;helperName(), Zend_View will look first for
// "/other/path/to/helpers/HelperName.php", then for
// "/path/to/some/helpers/HelperName", and finally for
// "Zend/View/Helpers/HelperName.php".
?&gt;
        </pre>
</div>
<div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.view.helpers.custom"></a>28.4.3. Writing Custom Helpers</h3></div></div></div>
<p>
            Writing custom helpers is easy; just follow these rules:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                The class name must be Zend_View_Helper_*, where * is
                the helper name itself.  E.g., if you were writing a
                helper called "specialPurpose", the class name would be
                "Zend_View_Helper_SpecialPurpose" (note the
                capitalization).
            </p></li>
<li><p>
                The class must have a public method that matches the
                helper name; this is the method that will be called when
                your template calls "$this-&gt;specialPurpose()".  In our
                "specialPurpose" helper example, the required method
                declaration would be "public function specialPurpose()". 
            </p></li>
<li><p>
                In general, the class should not echo or print or otherwise
                generate output.  Instead, it should return values to be
                printed or echoed.  The returned values should be escaped
                appropriately.
            </p></li>
<li><p>
                The class must be in file named after the helper method.
                Again using our "specialPurpose" helper example, the file
                has to be named "SpecialPurpose.php".
            </p></li>
</ul></div>
<p>
            Place the helper class file somewhere in your helper path stack,
            and Zend_View will automatically load, instantiate, persist,
            and execute it for you.
        </p>
<p>
            Here is an example of our SpecialPurpose helper code:
        </p>
<pre class="programlisting">&lt;?php
class Zend_View_Helper_SpecialPurpose {
    protected $_count = 0;
    public function specialPurpose()
    {
        $this-&gt;_count++;
        $output = "I have seen 'The Jerk' {$this-&gt;_count} time(s).";
        return htmlspecialchars($output);
    }
}
?&gt;
        </pre>
<p>
            Then in a view script, you can call the SpecialPurpose helper
            as many times as you like; it will be instantiated once, and
            then it persists for the life of that Zend_View instance.
        </p>
<pre class="programlisting">&lt;?php
// remember, in a view script, $this refers to the Zend_View instance.
echo $this-&gt;specialPurpose();
echo $this-&gt;specialPurpose();
echo $this-&gt;specialPurpose();
?&gt;
        </pre>
<p>
            The output would look something like this:
        </p>
<pre class="programlisting">I have seen 'The Jerk' 1 time(s).
I have seen 'The Jerk' 2 time(s).
I have seen 'The Jerk' 3 time(s).
        </pre>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.view.scripts.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.view.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.xmlrpc.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">28.3. View Scripts </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td>
<td width="40%" align="right" valign="top"> Chapter 29. Zend_XmlRpc</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
