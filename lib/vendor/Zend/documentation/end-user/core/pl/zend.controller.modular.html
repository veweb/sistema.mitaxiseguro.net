<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>7.7. Użycie konwencjonalnej modularnej struktury katalogów</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Przewodnik Programisty">
<link rel="up" href="zend.controller.html" title="Rozdział 7. Zend_Controller">
<link rel="prev" href="zend.controller.plugins.html" title="7.6. Wtyczki">
<link rel="next" href="zend.controller.exceptions.html" title="7.8. Wyjątki MVC">
<link rel="chapter" href="zend.html" title="Rozdział 1. Zend">
<link rel="chapter" href="zend.acl.html" title="Rozdział 2. Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="Rozdział 3. Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="Rozdział 4. Zend_Cache">
<link rel="chapter" href="zend.config.html" title="Rozdział 5. Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="Rozdział 6. Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="Rozdział 7. Zend_Controller">
<link rel="chapter" href="zend.date.html" title="Rozdział 8. Zend_Date">
<link rel="chapter" href="zend.db.html" title="Rozdział 9. Zend_Db">
<link rel="chapter" href="zend.feed.html" title="Rozdział 10. Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="Rozdział 11. Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="Rozdział 12. Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="Rozdział 13. Zend_Http">
<link rel="chapter" href="zend.json.html" title="Rozdział 14. Zend_Json">
<link rel="chapter" href="zend.locale.html" title="Rozdział 15. Zend_Locale">
<link rel="chapter" href="zend.log.html" title="Rozdział 16. Zend_Log">
<link rel="chapter" href="zend.mail.html" title="Rozdział 17. Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="Rozdział 18. Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="Rozdział 19. Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="Rozdział 20. Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="Rozdział 21. Zend_Rest">
<link rel="chapter" href="zend.search.html" title="Rozdział 22. Zend_Search">
<link rel="chapter" href="zend.server.html" title="Rozdział 23. Zend_Server">
<link rel="chapter" href="zend.service.html" title="Rozdział 24. Zend_Service">
<link rel="chapter" href="zend.session.html" title="Rozdział 25. Zend_Session">
<link rel="chapter" href="zend.uri.html" title="Rozdział 26. Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="Rozdział 27. Zend_Validate">
<link rel="chapter" href="zend.view.html" title="Rozdział 28. Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="Rozdział 29. Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="Dodatek A. Zend Framework PHP Coding Standard">
<link rel="appendix" href="copyrights.html" title="Dodatek B. Informacje o prawach autorskich">
<link rel="index" href="the.index.html" title="Indeks">
<link rel="subsection" href="zend.controller.modular.html#zend.controller.modular.introduction" title="7.7.1. Wprowadzenie">
<link rel="subsection" href="zend.controller.modular.html#zend.controller.modular.directories" title="7.7.2. Określanie ścieżek kontrolera modułów">
<link rel="subsection" href="zend.controller.modular.html#zend.controller.modular.router" title="7.7.3. Dopasowanie tras do modułów">
<link rel="subsection" href="zend.controller.modular.html#zend.controller.modular.defaultcontroller" title="7.7.4. Moduł lub globalny domyślny kontroler">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">7.7. Użycie konwencjonalnej modularnej struktury katalogów</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.controller.plugins.html">Poprzedni</a> </td>
<th width="60%" align="center">Rozdział 7. Zend_Controller</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.controller.exceptions.html">Następny</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="pl">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.controller.modular"></a>7.7. Użycie konwencjonalnej modularnej struktury katalogów</h2></div></div></div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.modular.introduction"></a>7.7.1. Wprowadzenie</h3></div></div></div>
<p>
            Konwencjonalna modularna struktura katalogów pozwala ci na 
            oddzielenie różnych aplikacji MVC w osobne jednostki i użycie ich
            z różnymi kontrolerami frontowymi. Przykładem może być taka 
            struktura katalogów:
        </p>
<pre class="programlisting">
docroot/
    index.php
application/
    controllers/
        IndexController.php
        FooController.php
    blog/
        controllers/
            IndexController.php
        models/
        views/
    news/
        controllers/
            IndexController.php
            ListController.php
        models/
        views/
</pre>
<p>
            W tym modelu, nazwa modułu uwidacznia się jako przedrostek nazw 
            kontrolerów, ktore zawiera moduł. Powyższy przykład zawiera trzy
            kontrolery modułów, 'Blog_IndexController', 'News_IndexController',
            oraz 'News_ListController'. Dwa globalne kontrolery, 'IndexController'
            oraz 'FooController' są także zdefiniowane; żaden z nich nie posiada
            własnej przestrzeni nazw. Ta struktura katalogów będzie używana w 
            przykładach w tym rozdziale.
        </p>
<p>
            Więc jak implementujesz taką strukturę katalogów używając 
            komponentów MVC Zend Framework?
        </p>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.modular.directories"></a>7.7.2. Określanie ścieżek kontrolera modułów</h3></div></div></div>
<p>
            Pierwszym krokiem użycia modułów jest zmodyfikowanie sposobu 
            określania listy ścieżek do kontrolerów w kontrolerze frontowym.
            W podstawowej wersji MVC, przekazujesz tablicę lub łańcuch znaków
            do metody setControllerDirectory(), lub ścieżkę do metody 
            addControllerDirectory(). Gdy używasz modułów, musisz także 
            odpowiednio zmienić wywołania tych metod.
        </p>
<p>
            W metodzie setControllerDirectory(), musisz przekazać tablicę 
            asocjacyjną i określić pary klucz/wartość w postaci 
            moduł/ścieżka. Specjalny klucz 'default' będzie użyty dla globalnych 
            kontrolerów (tych, które nie potrzebują przestrzeni nazw). Wszystkie 
            wpisy powinny zawierać łańcuch znaków wskazujący na pojedyncza 
            ścieżkę. Na przykład:
        </p>
<pre class="programlisting">
$front-&gt;setControllerDirectory(array(
      'default' =&gt; '/path/to/application/controllers',
      'blog'    =&gt; '/path/to/application/blog/controllers'
));
</pre>
<p>
            Metoda addControllerDirectory() przyjmuje opcjonalny drugi argument.
            Gdy używasz modułów, przekaż nazwę modułu jak drugi argument; jeśli
            nie określisz drugiego argumentu, ścieżka zostanie dodana dla 
            domyślnej przestrzeni nazw. Na przykład:
        </p>
<pre class="programlisting">
$front-&gt;addControllerDirectory('/path/to/application/news/controllers', 'news');
</pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.modular.router"></a>7.7.3. Dopasowanie tras do modułów</h3></div></div></div>
<p>
            Domyślna trasa w
            <code class="code">Zend_Controller_Router_Rewrite</code> jest obiektem typu
            <code class="code">Zend_Controller_Router_Route_Module</code>. Ta trasa obsługuje
            takie schematy routingu:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p><code class="code">:module/:controller/:action/*</code></p></li>
<li><p><code class="code">:controller/:action/*</code></p></li>
</ul></div>
<p>
            Innymi słowy, dopasuje ona tylko kontroler oraz akcję, lub wraz
            z poprzedzającym je modułem. Zasady dopasowania określają, że
            moduł będzie dopasowany tylko wtedy, gdy klucz o takiej samej nazwie
            istnieje w tablicy ze ścieżkami kontrolerów przekazanej do kontrolera
            frontowego i obiektu uruchamiającego.
        </p>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.modular.defaultcontroller"></a>7.7.4. Moduł lub globalny domyślny kontroler</h3></div></div></div>
<p>
            W domyślnym routerze jeśli w URL nie został określony kontroler, 
            użyty zostanie domyślny kontroler (<code class="code">IndexController</code>, 
            jeśli nie określono inaczej). Gdy używamy kontrolerów modularnych, 
            jeśli moduł został określony, ale kontroler nie, obiekt 
            uruchamiający wpierw będzie szukał domyślnego kontrolera w ścieżce 
            modułu, a w drugiej kolejności będzie szukał w ścieżce dla domyślnej 
            globalnej przestrzeni nazw 'default'.
        </p>
<p>
            Jeśli chcesz zawsze używać domyślnej przestrzeni nazw, ustaw 
            parametr <code class="code">useGlobalDefault</code> w kontrolerze frontowym:
        </p>
<pre class="programlisting">
$front-&gt;setParam('useGlobalDefault', true);
</pre>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.controller.plugins.html">Poprzedni</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.controller.html">Początek rozdziału</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.controller.exceptions.html">Następny</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">7.6. Wtyczki </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Spis treści</a></td>
<td width="40%" align="right" valign="top"> 7.8. Wyjątki MVC</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
