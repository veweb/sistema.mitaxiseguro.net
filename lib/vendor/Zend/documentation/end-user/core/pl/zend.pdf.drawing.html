<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>20.5. Rysowanie.</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Przewodnik Programisty">
<link rel="up" href="zend.pdf.html" title="Rozdział 20. Zend_Pdf">
<link rel="prev" href="zend.pdf.pages.html" title="20.4. Strony dokumentu.">
<link rel="next" href="zend.pdf.usage.html" title="20.6. Przykład użycia modułu Zend_Pdf.">
<link rel="chapter" href="zend.html" title="Rozdział 1. Zend">
<link rel="chapter" href="zend.acl.html" title="Rozdział 2. Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="Rozdział 3. Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="Rozdział 4. Zend_Cache">
<link rel="chapter" href="zend.config.html" title="Rozdział 5. Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="Rozdział 6. Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="Rozdział 7. Zend_Controller">
<link rel="chapter" href="zend.date.html" title="Rozdział 8. Zend_Date">
<link rel="chapter" href="zend.db.html" title="Rozdział 9. Zend_Db">
<link rel="chapter" href="zend.feed.html" title="Rozdział 10. Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="Rozdział 11. Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="Rozdział 12. Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="Rozdział 13. Zend_Http">
<link rel="chapter" href="zend.json.html" title="Rozdział 14. Zend_Json">
<link rel="chapter" href="zend.locale.html" title="Rozdział 15. Zend_Locale">
<link rel="chapter" href="zend.log.html" title="Rozdział 16. Zend_Log">
<link rel="chapter" href="zend.mail.html" title="Rozdział 17. Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="Rozdział 18. Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="Rozdział 19. Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="Rozdział 20. Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="Rozdział 21. Zend_Rest">
<link rel="chapter" href="zend.search.html" title="Rozdział 22. Zend_Search">
<link rel="chapter" href="zend.server.html" title="Rozdział 23. Zend_Server">
<link rel="chapter" href="zend.service.html" title="Rozdział 24. Zend_Service">
<link rel="chapter" href="zend.session.html" title="Rozdział 25. Zend_Session">
<link rel="chapter" href="zend.uri.html" title="Rozdział 26. Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="Rozdział 27. Zend_Validate">
<link rel="chapter" href="zend.view.html" title="Rozdział 28. Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="Rozdział 29. Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="Dodatek A. Zend Framework PHP Coding Standard">
<link rel="appendix" href="copyrights.html" title="Dodatek B. Informacje o prawach autorskich">
<link rel="index" href="the.index.html" title="Indeks">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.geometry" title="20.5.1. Geometria.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.color" title="20.5.2. Kolory.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.shape-drawing" title="20.5.3. Rysowanie figur.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.text-drawing" title="20.5.4. Wypisywanie tekstu.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.using-fonts" title="20.5.5. Użycie czcionek.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.image-drawing" title="20.5.6. Wstawianie obrazów.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.line-drawing-style" title="20.5.7. Styl rysowania linii.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.fill-style" title="20.5.8. Styl wypełnienia.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.rotations" title="20.5.9. Obracanie.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.save-restore" title="20.5.10. Zapisywanie/odczytywanie stanu grafiki.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.clipping" title="20.5.11. Przycięcie obszaru rysowania.">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.styles" title="20.5.12. Style.">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">20.5. Rysowanie.</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Poprzedni</a> </td>
<th width="60%" align="center">Rozdział 20. Zend_Pdf</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">Następny</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="pl">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.pdf.drawing"></a>20.5. Rysowanie.</h2></div></div></div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.geometry"></a>20.5.1. Geometria.</h3></div></div></div>
<p>
        PDF używa takiej samej geometrii jak PostScript. Zaczyna z lewego dolnego
        rogu strony, a jednostka domyślnie jest wyrażana w punktach (1/72 cala).
        </p>
<p>
        Rozmiar strony może być pobrany z obiektu strony:
        </p>
<p>
            </p>
<pre class="programlisting">
$width  = $pdfPage-&gt;getWidth();
$height = $pdfPage-&gt;getHeight();
            </pre>
<p>
        </p>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.color"></a>20.5.2. Kolory.</h3></div></div></div>
<p>
        PDF ma bardzo rozbudowane możliwości reprezentowania kolorów. Zend_Pdf
        wspiera palety Grey Scale, RGB oraz CMYK. Każda z nich może być użyta 
        wszędzie, gdzie jest wymagany obiekt <code class="code">Zend_Pdf_Color</code>. Klasy 
        <code class="code">Zend_Pdf_Color_GrayScale</code>, <code class="code">Zend_Pdf_Color_RGB</code> oraz
        <code class="code">Zend_Pdf_Color_CMYK</code> zapewniają taką funkcjonalność:
        </p>
<pre class="programlisting">
// $grayLevel (liczba zmiennoprzecinkowa). 0.0 (czarny) - 1.0 (biały)
$color1 = new Zend_Pdf_Color_GrayScale($grayLevel);

// $r, $g, $b (liczby zmiennoprzecinkowe). 0.0 (minimalna intensywność) - 1.0 (maksymalna intensywność)
$color2 = new Zend_Pdf_Color_RGB($r, $g, $b);

// $c, $m, $y, $k (liczby zmiennoprzecinkowe). 0.0 (minimalna intensywność) - 1.0 (maksymalna intensywność)
$color3 = new Zend_Pdf_Color_CMYK($c, $m, $y, $k);
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.shape-drawing"></a>20.5.3. Rysowanie figur.</h3></div></div></div>
<p>
        Wszystkie operacje rysowania mogą być przeprowadzone w kontekście strony PDF.
        </p>
<p>
        Klasa <code class="code">Zend_Pdf_Page</code> zapewnia zestaw podstawowych operacji rysowania:
        </p>
<pre class="programlisting">
/**
 * Rysuje linię z punktu x1,y1 do x2,y2.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function drawLine($x1, $y1, $x2, $y2);
        </pre>
<pre class="programlisting">
/**
 * Rysuje prostokąt.
 *
 * Typy wypełnienia:
 * Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - wypełnia i obramowuje prostokąt (domyślnie)
 * Zend_Pdf_Page::SHAPE_DRAW_STROKE      - obramowuje prostokąt
 * Zend_Pdf_Page::SHAPE_DRAW_FILL        - wypełnia prostokąt
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param integer $fillType
 */
public function drawRectangle($x1, $y1, $x2, $y2, $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE);
        </pre>
<pre class="programlisting">
/**
 * Rysuje wielokąt.
 *
 * Jeśli $fillType ma wartość Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE lub Zend_Pdf_Page::SHAPE_DRAW_FILL,
 * wtedy wielokąt jest automatycznie zamknięty.
 * Zobacz szczegółową dokumentację tych metod w dokumentacji PDF
 * (sekcja 4.4.2 Path painting Operators, Filling)
 *
 * @param array $x  - array of float (the X co-ordinates of the vertices)
 * @param array $y  - array of float (the Y co-ordinates of the vertices)
 * @param integer $fillType
 * @param integer $fillMethod
 */
public function drawPolygon($x, $y,
                            $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE,
                            $fillMethod = Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
        </pre>
<pre class="programlisting">
/**
 * Rysuje okrąg o środku w punkcie $x, $y o promieniu $radius.
 *
 * Kąty są określane w radianach.
 *
 * Sygnatury metod:
 * drawCircle($x, $y, $radius);
 * drawCircle($x, $y, $radius, $fillType);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle, $fillType);
 *
 *
 * Nie jest to do końca okrąg, ponieważ PDF obsługuje jedynie kubiczne krzywe Beziera.
 * Ale jest to bardzo dobre przybliżenie.
 * Różni się od realnego okręgu maksymalnie o 0.00026 promienia
 * (przy kątach PI/8, 3*PI/8, 5*PI/8, 7*PI/8, 9*PI/8, 11*PI/8, 13*PI/8 oraz 15*PI/8).
 * Przy kątach 0, PI/4, PI/2, 3*PI/4, PI, 5*PI/4, 3*PI/2 oraz 7*PI/4 jest to dokładny okrąg.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param mixed $param4
 * @param mixed $param5
 * @param mixed $param6
 */
public function  drawCircle($x, $y, $radius, $param4 = null, $param5 = null, $param6 = null);
        </pre>
<pre class="programlisting">
/**
 * Rysuje elipsę wewnątrz określonego prostokąta.
 *
 * Sygnatury metod:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $fillType);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle, $fillType);
 *
 * Kąty są określane w radianach
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param mixed $param5
 * @param mixed $param6
 * @param mixed $param7
 */
public function drawEllipse($x1, $y1, $x2, $y2, $param5 = null, $param6 = null, $param7 = null);
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.text-drawing"></a>20.5.4. Wypisywanie tekstu.</h3></div></div></div>
<p>
        Operacje wypisywania tekstu także są przeprowadzone w kontekście strony PDF
        Możesz wypisać pojedynczą linię tekstu w dowolnym miejscu na stronie podając
        współrzędne x oraz y linii bazowej. W operacjach wypisywania tekstu używana
        jest czcionka o aktualnie ustawionym kroju oraz rozmiarze (zobacz poniżej
        szczegółowy opis).
        </p>
<pre class="programlisting">
/**
 * Wypisuje linię tekstu w określonym miejscu.
 *
 * @param string $text
 * @param float $x
 * @param float $y
 * @param string $charEncoding (opcjonalny) Kodowanie znaków tekstu.
 *   Domyślnie według ustawień lokalizacji.
 * @throws Zend_Pdf_Exception
 */
public function drawText($text, $x, $y, $charEncoding = '');
        </pre>
<div class="example">
<a name="id4864490"></a><p class="title"><b>Przykład 20.5. Wypisywanie tekstu na stronie.</b></p>
<pre class="programlisting">&lt;?php
...
$pdfPage-&gt;drawText('Hello world!', 72, 720);
...
?&gt;
            </pre>
</div>
<p>
        Domyślnie, łańcuchy znaków są interpretowane przy użyciu metod kodowania
        znaków biężacych ustawień lokalnych. Jeśli masz łańcuch znaków używający
        innych metod kodowania (na przykład dane jako łańcuch znaków UTF-8 odczytany 
        z pliku na dysku, lub łańcuch znaków MacRoman pobrany z bazy danych), 
        możesz wskazać kodowanie znaków podczas wypisywania tekstu i Zend_Pdf 
        przeprowadzi dla ciebie konwersję. Możesz użyć źródłowego łańcucha znaków
        w dowolnym kodowaniu obsługiwanym przez funkcję PHP <code class="code"><a href="http://www.php.net/manual/function.iconv.php" target="_top">iconv()</a></code>:
        </p>
<div class="example">
<a name="id4864541"></a><p class="title"><b>Przykład 20.6. Wypisywanie tekstu zakodowanego w UTF-8 na stronie.</b></p>
<pre class="programlisting">&lt;?php
...
// Odczytaj z dysku tekst zakodowany w UTF-8.
$unicodeString = fread($fp, 1024);

// Wypisz tekst na stronie
$pdfPage-&gt;drawText($unicodeString, 72, 720, 'UTF-8');
...
?&gt;
            </pre>
</div>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.using-fonts"></a>20.5.5. Użycie czcionek.</h3></div></div></div>
<p>
        Metoda <code class="code">Zend_Pdf_Page::drawText()</code> używa bieżącego kroju
        oraz rozmiaru czcionki dla strony, które ustawia się za pomocą metody 
        <code class="code">Zend_Pdf_Page::setFont()</code>:
        </p>
<pre class="programlisting">
/**
 * Ustawia bieżącą czcionkę.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
        </pre>
<p>
        Dokumenty PDF obsługują czionki PostScript Type 1 oraz TrueType, tak samo
        dobrze jak dwa wyspecjalizowane typy PDF, Type 3 oraz czcionki złożone Type 0. Jest
        także 14 standardowych czcionek Type 1 wbudowanych w każdą przeglądarkę PDF: 
        Courier (4 style), Helvetica (4 style), Times (4 style), Symbol, and Zapf Dingbats.
        </p>
<p>
        Zend_Pdf obecnie obsługuje 14 standardowych czcionek PDF tak samo dobrze
        jak twoje własne czcionki TrueType. Obiekty czcionek są obsługiwane za pomocą 
        jednej z dwóch metod fabryk: <code class="code">Zend_Pdf_Font::fontWithName($fontName)</code>
        dla 14 standardowych czcionek PDF lub <code class="code">Zend_Pdf_Font::fontWithPath($filePath)</code> 
        dla własnych czcionek.
        </p>
<div class="example">
<a name="id4864638"></a><p class="title"><b>Przykład 20.7. Tworzenie standardowej czcionki.</b></p>
<pre class="programlisting">&lt;?php
...
// Utwórz nową czcionkę
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

// Ustaw czcionkę
$pdfPage-&gt;setFont($font, 36);
...
?&gt;
            </pre>
</div>
<p>
        Stałe dla nazwa 14 standardowych czcionek PDF są zdefiniowane w klasie <code class="code">Zend_Pdf_Font</code>:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>Zend_Pdf_Font::FONT_COURIER</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_BOLD_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_BOLD_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_SYMBOL</p></li>
<li><p>Zend_Pdf_Font::FONT_ZAPFDINGBATS</p></li>
</ul></div>
<p>
        </p>
<p>
        Możesz także użyć dowolnej czcionki TrueType (która najcześciej ma rozszerzenie 
        '.ttf') lub czcionki OpenType (rozszerzenie '.otf') jeśli zawiera czcionke
        zrobioną według wytycznych TrueType. Obecnie nieobsługiwane, ale planowane 
        w przyszłych wersjach są pliki czcionek Mac OS X .dfont oraz pliki Microsoft 
        TrueType Collection (rozszerzenie '.ttc').
        </p>
<p>
        Aby użyć czcionki TrueType, musisz podać pełną ścieżke do pliku czcionki. 
        Jeśli z jakiegoś powodu nie może on być odczytany, lub nie jest to czcionka
        TrueType, metoda fabryki wyrzuci wyjątek:
        </p>
<div class="example">
<a name="id4864796"></a><p class="title"><b>Przykład 20.8. Tworzenie czcionki TrueType.</b></p>
<pre class="programlisting">&lt;?php
...
// Utwórz nową czcionkę
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF');

// Ustaw czcionkę
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
?&gt;
            </pre>
</div>
<p>
        Domyślnie własne czcionki będą osadzone w wynikowym dokumencie PDF. To
        pozwala odbiorcom oglądać stronę taką, jaka była zamierzona, nawet gdy
        nie mają zainstalowanych w systemie potrzebnych czcionek. Jeśli ważny
        jest dla ciebie rozmiar pliku, możesz zażądać, aby plik czcionki nie
        był osadzony przekazując opcję 'nie osadzaj' do metody fabryki:
        </p>
<div class="example">
<a name="id4864832"></a><p class="title"><b>Przykład 20.9. Tworzenie czcionki TrueType, ale bez osadzania jej w dokumencie PDF.</b></p>
<pre class="programlisting">&lt;?php
...
// Utwórz nową czcionkę
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF',
                                               Zend_Pdf_Font::EMBED_DONT_EMBED);

// Ustaw czcionkę
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
?&gt;
            </pre>
</div>
<p>
        Jeśli plik czcionki nie jest osadzony, ale odbiorca pliku PDF posiada taką
        czcionkę zainstalowaną w swoim systemie, zobaczy on dokument w sposób
        identyczny z zamierzonym. Jeśli nie ma zainstalowanej odpowiedniej czcionki, 
        przeglądarka PDF użyje najlepszej aby zastąpić czcionkę.
        </p>
<p>
        Niektóre czcionki mają bardzo specyficzne zasady licencjonowania, które
        uniemożliwiają osadzenie ich w dokumentach PDF. Także nie złamiesz tych
        zasad, ponieważ gdy spróbujesz użyć czcionkę, która nie może być osadzona
        metoda fabryki wyrzuci wyjątek.
        </p>
<p>
        Możesz wciąż użyć tych czcionek, ale musisz przekazać odpowiedni parametr 
        w celu nieosadzenia czcionki, lub w prosty sposób zignorować wyjątek:
        </p>
<div class="example">
<a name="id4864893"></a><p class="title"><b>Przykład 20.10. Nie wyrzucanie wyjątku dla czcionek które nie mogą być osadzone.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/unEmbeddableFont.ttf',
                                    Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION);
...
?&gt;
            </pre>
</div>
<p>
        Ta technika zignorowania wyjątku jest przydatna, gdy pozwalasz użytkownikowi 
        końcowemu wybierać własne czcionki. Czcionki, ktore mogą być osadzone, 
        będą osadzone w dokumencie PDF; te które nie mogą, nie będą.
        </p>
<p>
        Pliki czcionek mogą być duże, czasem osiągająć dziesiątki megabajtów. Domyślnie
        wszystkie osadzane czcionki są kompresowane przy użyciu schematu kompresji Flate, 
        co powoduje zaoszczędzenie średnio 50% miejsca. Jeśli z jakiegoś powodu 
        nie chcesz kompresować plików czcionek, możesz to zablokować opcją:
        </p>
<div class="example">
<a name="id4864942"></a><p class="title"><b>Przykład 20.11. Nie kompresowanie osadzonych czcionek.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/someReallyBigFont.ttf',
                                    Zend_Pdf_Font::EMBED_DONT_COMPRESS);
...
?&gt;
            </pre>
</div>
<p>
        Ostatecznie, jeśli potrzebujesz, możesz łączyć opcje osadzania czcionek
        używając bitowego operatora LUB:
        </p>
<div class="example">
<a name="id4864971"></a><p class="title"><b>Przykład 20.12. Łączenie opcji osadzania czcionki.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath($someUserSelectedFontPath,
                                    (Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION |
                                     Zend_Pdf_Font::EMBED_DONT_COMPRESS));
...
?&gt;
            </pre>
</div>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.image-drawing"></a>20.5.6. Wstawianie obrazów.</h3></div></div></div>
<p>
        Klasa <code class="code">Zend_Pdf_Page</code>zapewnia metodę drawImage() do wstawiania
        obrazów:
        </p>
<pre class="programlisting">
/**
 * Wstawia obraz w określonym miejscu na stronie.
 *
 * @param Zend_Pdf_Image $image
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function drawImage(Zend_Pdf_Image $image, $x1, $y1, $x2, $y2);
        </pre>
<p>
        Obrazy są reprezentowane przez obiekty klasy <code class="code">Zend_Pdf_Image</code>.
        </p>
<p>
        Obecnie obsługiwane są formaty JPG, PNG oraz TIFF:
        </p>
<div class="example">
<a name="id4864247"></a><p class="title"><b>Przykład 20.13. Wstawianie obrazów.</b></p>
<pre class="programlisting">&lt;?php
...
// Utwórz obiekt obrazu bezpośrednio (wybierz jedno z poniższych)
$image = new Zend_Pdf_Image_JPEG('my_image.jpg');
$image = new Zend_Pdf_Image_TIFF('my_image.tiff');
$image = new Zend_Pdf_Image_PNG('my_image.png');

// lub użyj klasy Zend_Pdf_ImageFactory aby załadować odpowiedni typ
$image = Zend_Pdf_ImageFactory::factory('my_image.jpg');

$pdfPage-&gt;drawImage($image, 100, 100, 400, 300);
...
?&gt;
            </pre>
</div>
<p>
            <span class="emphasis"><em>Ważne! Klasa Zend_Pdf_Image_JPEG wymaga rozszerzenia PHP GD.</em></span>
            <span class="emphasis"><em>Ważne! Klasa Zend_Pdf_Image_PNG wymaga rozszerzenia ZLIB skonfigurowanego do obsługi obrazów z kanałem Alpha.</em></span>
        </p>
<p>
            Sprawdź dokumentację PHP aby znaleźć bardziej szczegółowe informacje.
            (<a href="http://www.php.net/manual/en/ref.image.php" target="_top">http://www.php.net/manual/en/ref.image.php</a>).
            (<a href="http://www.php.net/manual/en/ref.zlib.php" target="_top">http://www.php.net/manual/en/ref.zlib.php</a>).
        </p>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.line-drawing-style"></a>20.5.7. Styl rysowania linii.</h3></div></div></div>
<p>
        Styl rysowania linii jest zdefiniowany przez grubość, kolor linii oraz
        ozdobny wzór linii. Wszystkie te parametry mogą być zdefiniowane za pomocą
        metod klasy <code class="code">Zend_Pdf_Page</code>:
        </p>
<pre class="programlisting">
/** Ustaw kolor linii. */
public function setLineColor(Zend_Pdf_Color $color);

/** Ustaw grubość linii. */
public function setLineWidth(float $width);

/**
 * Ustawia ozdobny wzór linii.
 *
 * Wzór jest tablicą liczb zmiennoprzecinkowych: array(dlugosc_on, dlugosc_off, dlugosc_on, dlugosc_off, ...)
 * Faza jest przesunięciem od początku linii.
 *
 * @param array $pattern
 * @param array $phase
 */
public function setLineDashingPattern($pattern, $phase = 0);
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.fill-style"></a>20.5.8. Styl wypełnienia.</h3></div></div></div>
<p>
        Metody <code class="code">Zend_Pdf_Page::drawRectangle()</code>, <code class="code">Zend_Pdf_Page::drawPoligon()</code>,
        <code class="code">Zend_Pdf_Page::drawCircle()</code> oraz <code class="code">Zend_Pdf_Page::drawEllipse()</code> 
        przyjmują argument <code class="code">$fillType</code> jako opcjonalny parametr. Może
        on mieć wartość:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>Zend_Pdf_Page::SHAPE_DRAW_STROKE - obrysowuje figurę</p></li>
<li><p>Zend_Pdf_Page::SHAPE_DRAW_FILL - tylko wypełnia</p></li>
<li><p>Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - obrysowuje i wypełnia (domyślnie)</p></li>
</ul></div>
<p>
        Metoda <code class="code">Zend_Pdf_Page::drawPoligon()</code> przyjmuje także dodatkowy
        parametr <code class="code">$fillMethod</code>:
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING (domyślnie)</p>
<p>
                <em class="citetitle">Dokumentacja PDF</em> opisuje tą zasadę w ten sposób:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
Zasada nonzero winding number określa whether a given point is inside a
path by conceptually drawing a ray from that point to infinity in any direction
and then examining the places where a segment of the path crosses the ray. Starting
with a count of 0, the rule adds 1 each time a path segment crosses the ray
from left to right and subtracts 1 each time a segment crosses from right to left.
After counting all the crossings, if the result is 0 then the point is outside the path;
otherwise it is inside.

Nota: Opisana właśnie metoda nie określa what to do if a path segment coincides
with or is tangent to the chosen ray. Since the direction of the ray is arbitrary,
the rule simply chooses a ray that does not encounter such problem intersections.
For simple convex paths, the nonzero winding number rule defines the inside
and outside as one would intuitively expect. The more interesting cases are those
involving complex or self-intersecting paths like the ones shown in Figure 4.10
(w dokumentacji PDF).

For a path consisting of a five-pointed star, drawn with five connected straight
line segments intersecting each other, the rule considers the inside to be the entire
area enclosed by the star, including the pentagon in the center. For a path composed
of two concentric circles, the areas enclosed by both circles are considered
to be inside, provided that both are drawn in the same direction. If the circles are
drawn in opposite directions, only the "doughnut" shape between them is inside,
according to the rule; the "doughnut hole" is outside.
                </p></blockquote></div>
<p>
            </p>
</li>
<li>
<p>Zend_Pdf_Page::FILL_METHOD_EVEN_ODD</p>
<p>
                <em class="citetitle">Dokumentacja PDF</em> opisuje tą zasadę w ten sposób:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
An alternative to the nonzero winding number rule is the even-odd rule. This rule
determines the "insideness" of a point by drawing a ray from that point in any
direction and simply counting the number of path segments that cross the ray,
regardless of direction. If this number is odd, the point is inside; if even, the point
is outside. This yields the same results as the nonzero winding number rule for
paths with simple shapes, but produces different results for more complex
shapes.

Figure 4.11 (w dokumentacji PDF) shows the effects of applying the even-odd rule
to complex paths. For the five-pointed star, the rule considers the triangular
points to be inside the path, but not the pentagon in the center. For the two
concentric circles, only the "doughnut" shape between the two circles is considered inside,
regardless of the directions in which the circles are drawn.
                    </p></blockquote></div>
<p>
            </p>
</li>
</ul></div>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.rotations"></a>20.5.9. Obracanie.</h3></div></div></div>
<p>
        Strony PDF mogą być obracane zanim zostaną wykonane jakiekolwiek 
        operacje rysowania. Może być to zrobione za pomocą metody 
        <code class="code">Zend_Pdf_Page::rotate()</code>:
        </p>
<pre class="programlisting">
/**
 * Obraca stronę dookoła punktu ($x, $y) o określony kąt (w radianach).
 *
 * @param float $angle
 */
public function rotate($x, $y, $angle);
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.save-restore"></a>20.5.10. Zapisywanie/odczytywanie stanu grafiki.</h3></div></div></div>
<p>
        W dowolnej chwili stan grafiki (bieżąca czcionka, rozmiar czcionki, kolor linii, 
        kolor wypełnienia, styl linii, obrót strony, obszar przycinania) może być zapisany
        a potem przywrócony. Operacja zapisu zapisuje dane na stos stanu grafiki,
        operacja przywrócenia przywraca je ze stosu.
        </p>
<p>
        Są dwie metody w klasie <code class="code">Zend_Pdf_Page</code> do tych operacji:
        </p>
<pre class="programlisting">
/**
 * Zapisuje stan grafiki danej strony.
 * Zapisuje obecny styl, pozycję, obszar przycinania oraz
 * ewetualny obrót/translację/skalowanie które są zastosowane.
 */
public function saveGS();

/**
 * Przywraca stan grafiki który był zapisany ostatnim wywołaniem metody saveGS().
 */
public function restoreGS();
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.clipping"></a>20.5.11. Przycięcie obszaru rysowania.</h3></div></div></div>
<p>
        PDF oraz moduł Zend_Pdf obsługują przycięcie obszaru rysowania. Obecny
        przycięty obszar ogranicza obszar strony, na który wpływają operacje 
        rysowania. Na początku jest to cała strona.
        </p>
<p>
        Klasa <code class="code">Zend_Pdf_Page</code> zapewnia zestaw metod dla operacji przycinania.
        </p>
<pre class="programlisting">
/**
 * Przycięcie obszaru za pomocą prostokąta.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function clipRectangle($x1, $y1, $x2, $y2);
        </pre>
<pre class="programlisting">
/**
 * Przycięcie obszaru za pomocą wielokąta.
 *
 * @param array $x  - tablica wartości zmiennoprzecinkowych (współrzędne X)
 * @param array $y  - tablica wartości zmiennoprzecinkowych (współrzędne Y)
 * @param integer $fillMethod
 */
public function clipPolygon($x, $y, $fillMethod = Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
        </pre>
<pre class="programlisting">
/**
 * Przycięcie obszaru za pomocą okręgu.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param float $startAngle
 * @param float $endAngle
 */
public function clipCircle($x, $y, $radius, $startAngle = null, $endAngle = null);
        </pre>
<pre class="programlisting">
/**
 * Przycięcie obszaru za pomocą elipsy.
 *
 * Sygnatury metod:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 *
 * @todo obsłużyć przypadki gdy $x2-$x1 == 0 lub $y2-$y1 == 0
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param float $startAngle
 * @param float $endAngle
 */
public function clipEllipse($x1, $y1, $x2, $y2, $startAngle = null, $endAngle = null);
        </pre>
</div>
<div class="sect2" lang="pl">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.styles"></a>20.5.12. Style.</h3></div></div></div>
<p>
        Klasa <code class="code">Zend_Pdf_Style</code> zapewnia funkcjonalność styli.
        </p>
<p>
        Styles mogą być użyte w celu przechowania zestawu parametrów stanu grafiki
        i następnie zastosowania go na stronie PDF za pomocą jednej operacji:
        </p>
<pre class="programlisting">
/**
 * Ustawia styl dla przyszłych operacji rysowania na tej stronie
 *
 * @param Zend_Pdf_Style $style
 */
public function setStyle(Zend_Pdf_Style $style);

/**
 * Zwraca styl zastosowany dla strony.
 *
 * @return Zend_Pdf_Style|null
 */
public function getStyle();
        </pre>
<p>
        Klasa <code class="code">Zend_Pdf_Style</code> zapewnia zestaw metod do ustawiania oraz pobierania różnych parametrów stanu grafiki:
        </p>
<pre class="programlisting">
/**
 * Ustawia kolor linii.
 *
 * @param Zend_Pdf_Color $color
 */
public function setLineColor(Zend_Pdf_Color $color);
        </pre>
<pre class="programlisting">
/**
 * Pobiera kolor linii.
 *
 * @return Zend_Pdf_Color|null
 */
public function getLineColor();
        </pre>
<pre class="programlisting">
/**
 * Ustawia grubość linii.
 *
 * @param float $width
 */
public function setLineWidth($width);
        </pre>
<pre class="programlisting">
/**
 * Pobiera grubość linii.
 *
 * @return float
 */
public function getLineWidth();
        </pre>
<pre class="programlisting">
/**
 * Ustawia ozdobny wzór linii
 *
 * @param array $pattern
 * @param float $phase
 */
public function setLineDashingPattern($pattern, $phase = 0);
        </pre>
<pre class="programlisting">
/**
 * Pobiera ozdobny wzór linii
 *
 * @return array
 */
public function getLineDashingPattern();
        </pre>
<pre class="programlisting">
/**
 * Pobiera okres ozdobnej fazy.
 *
 * @return float
 */
public function getLineDashingPhase();
        </pre>
<pre class="programlisting">
/**
 * Ustawia kolor wypełnienia.
 *
 * @param Zend_Pdf_Color $color
 */
public function setFillColor(Zend_Pdf_Color $color);
        </pre>
<pre class="programlisting">
/**
 * Pobiera kolor wypełnienia.
 *
 * @return Zend_Pdf_Color|null
 */
public function getFillColor();
        </pre>
<pre class="programlisting">
/**
 * Ustawia bieżącą czcionkę.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
        </pre>
<pre class="programlisting">
/**
 * Zmienia rozmiar bieżącej czcionki
 *
 * @param float $fontSize
 */
public function setFontSize($fontSize);
        </pre>
<pre class="programlisting">
/**
 * Pobiera bieżącą czcionkę.
 *
 * @return Zend_Pdf_Resource_Font $font
 */
public function getFont();
        </pre>
<pre class="programlisting">
/**
 * Pobiera rozmiar bieżącej czcionki
 *
 * @return float $fontSize
 */
public function getFontSize();
        </pre>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Poprzedni</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.pdf.html">Początek rozdziału</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">Następny</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">20.4. Strony dokumentu. </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Spis treści</a></td>
<td width="40%" align="right" valign="top"> 20.6. Przykład użycia modułu Zend_Pdf.</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
