<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>12.6. Using Google Calendar</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.gdata.html" title="第 12 章 Zend_Gdata">
<link rel="prev" href="zend.gdata.blogger.html" title="12.5. Using Google Blogger">
<link rel="next" href="zend.gdata.codesearch.html" title="12.7. Using Google CodeSearch">
<link rel="chapter" href="zend.html" title="第 1 章 Zend">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="第 3 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 4 章 Zend_Cache">
<link rel="chapter" href="zend.config.html" title="第 5 章 Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="第 6 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 7 章 Zend_Controller">
<link rel="chapter" href="zend.date.html" title="第 8 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 9 章 Zend_Db">
<link rel="chapter" href="zend.feed.html" title="第 10 章 Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="第 11 章 Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="第 12 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 13 章 Zend_Http">
<link rel="chapter" href="zend.json.html" title="第 14 章 Zend_Json">
<link rel="chapter" href="zend.locale.html" title="第 15 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 16 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 17 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 18 章 Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="第 19 章 Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="第 20 章 Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="第 21 章 Zend_Rest">
<link rel="chapter" href="zend.search.html" title="第 22 章 Zend_Search">
<link rel="chapter" href="zend.server.html" title="第 23 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 24 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 25 章 Zend_Session">
<link rel="chapter" href="zend.uri.html" title="第 26 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 27 章 Zend_Validate">
<link rel="chapter" href="zend.view.html" title="第 28 章 Zend_View">
<link rel="chapter" href="zend.validate.html" title="第 29 章 Zend_Validate">
<link rel="chapter" href="zend.xmlrpc.html" title="第 30 章 Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="附录 A. Zend Framework PHP Coding Standard">
<link rel="appendix" href="copyrights.html" title="附录 B. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.gdata.calendar.html#zend.gdata.calendar.query" title="12.6.1. Querying Google Calendar">
<link rel="subsection" href="zend.gdata.calendar.html#zend.gdata.calendar.post" title="12.6.2. Posting to Google Calendar">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">12.6. Using Google Calendar</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.gdata.blogger.html">上一页</a> </td>
<th width="60%" align="center">第 12 章 Zend_Gdata</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.gdata.codesearch.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.gdata.calendar"></a>12.6. Using Google Calendar</h2></div></div></div>
<p>
        You can use the Zend_Gdata_Calendar class to view, create, update,
        and delete events in the online Google Calendar service.
    </p>
<p>
        See
        <a href="http://code.google.com/apis/calendar/overview.html" target="_top">http://code.google.com/apis/calendar/overview.html</a>
        for more information about the Google Calendar API.
    </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.calendar.query"></a>12.6.1. Querying Google Calendar</h3></div></div></div>
<p>
            You can specify the owner of the calendar you want to view
            using the <code class="code">setUser()</code> method.  The value is a string,
            typically the account of a user of Google Calendar.  It can also
            be a specification of a group calendar.
        </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar();

// get public calendar for Google Developers
$gdataCal-&gt;setUser('developer-calendar@google.com');
$feed = $gdataCal-&gt;getCalendarFeed();
?&gt;</pre>
<p>
            See the documentation for <a href="zend.feed.html#zend.feed.introduction" title="10.1. Introduction">Zend_Feed</a>
            for more information on how to use this object.
        </p>
<p>
            If you do not specify a user, the default is "default".
            If you are making the query using an authenticated Http client,
            this becomes the calendar associated with your Google account
            you used to authenticate.
        </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar($authenticatedHttpClient);

// get current user's calendar
$myCalendarFeed = $gdataCal-&gt;getCalendarFeed();
?&gt;</pre>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.calendar.query.visibility"></a>12.6.1.1. Event visibility</h4></div></div></div>
<p>
                The <code class="code">setVisibility()</code> method allows you to specify
                that the entries returned in the feed are those that are
                publically visible or are private calendar entries.
                Private entries are accessible only if you are using an
                authenticated Http client.
                The default value is "public".
            </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar($authenticatedHttpClient);

// show my events that other people can see
$gdataCal-&gt;setVisiblity('public');
$feed = $gdataCal-&gt;getCalendarFeed();
?&gt;</pre>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.calendar.query.projection"></a>12.6.1.2. Event data projection</h4></div></div></div>
<p>
                The <code class="code">setProjection()</code> method allows you to specify
                how much information is returned in the feed.
                For example, "full" means to include
                all calendar event properties, but not comments that may be
                attached to the entry.  The value "composite" is like "full", and
                the feed entries contain subfeed data for comments.  See the
                Google Calendar API documentation for information on
                other projection values.
                The default value is "full".
            </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar();

// get minimal information from johndoe's calendar
$gdataCal-&gt;setUser('johndoe@gmail.com');
$gdataCal-&gt;setProjection('free-busy');
$feed = $gdataCal-&gt;getCalendarFeed();
?&gt;</pre>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.calendar.query.startmin"></a>12.6.1.3. Event dates</h4></div></div></div>
<p>
                The <code class="code">setStartMin()</code> and <code class="code">setStartMax()</code>
                methods allow you to specify bounds on the calendar event date.
                If you specify a value for <code class="code">startMin</code>,
                no events that begin earlier than the date you specify are
                included in the feed.  Likewise
                no events that begin after the date specified by
                <code class="code">startMax</code> are included.
            </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar($authenticatedHttpClient);

// get only events after 12/1
$gdataCal-&gt;setStartMin('2006-12-01');
$feed = $gdataCal-&gt;getCalendarFeed();
?&gt;</pre>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.gdata.calendar.query.calendarlist"></a>12.6.1.4. List calendars</h4></div></div></div>
<p>
                Use the <code class="code">getCalendarListFeed()</code> method to 
                get a feed containing a list of the calendars associated
                with the currently authenticated user.
                You must be using an authenticated Http client to get this feed.
            </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar($authenticatedHttpClient);
$myCalendars = $gdataCal-&gt;getCalendarListFeed();
?&gt;</pre>
</div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.gdata.calendar.post"></a>12.6.2. Posting to Google Calendar</h3></div></div></div>
<p>
            You can post a new event to your calendar using the
            <code class="code">post()</code> method.  Construct the XML definition
            for the event entry, according to the guidelines in the
            Google Calendar API documentation.  Then post the XML.
            You must be using an authenticated Http client to do this
            operation.
        </p>
<pre class="programlisting">&lt;?php
$gdataCal = new Zend_Gdata_Calendar($authenticatedHttpClient);

$xmlString = &lt;&lt;&lt;XML
&lt;entry xmlns='http://www.w3.org/2005/Atom'
    xmlns:gd='http://schemas.google.com/g/2005'&gt;
  &lt;category scheme='http://schemas.google.com/g/2005#kind'
    term='http://schemas.google.com/g/2005#event'&gt;&lt;/category&gt;
  &lt;title type='text'&gt;Tennis with Beth&lt;/title&gt;
  &lt;content type='text'&gt;Meet for a quick lesson.&lt;/content&gt;
  &lt;author&gt;
    &lt;name&gt;Jo March&lt;/name&gt;
    &lt;email&gt;jo@gmail.com&lt;/email&gt;
  &lt;/author&gt;
  &lt;gd:transparency
    value='http://schemas.google.com/g/2005#event.opaque'&gt;
  &lt;/gd:transparency&gt;
  &lt;gd:eventStatus
    value='http://schemas.google.com/g/2005#event.confirmed'&gt;
  &lt;/gd:eventStatus&gt;
  &lt;gd:where valueString='Rolling Lawn Courts'&gt;&lt;/gd:where&gt;
  &lt;gd:when startTime='2006-04-17T15:00:00.000Z'
    endTime='2006-04-17T17:00:00.000Z'&gt;&lt;/gd:when&gt;
&lt;/entry&gt;
XML;

$xml = new SimpleXMLElement($xmlString);

$gdataCal-&gt;post($xml-&gt;asXML());
?&gt;</pre>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.gdata.blogger.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.gdata.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.gdata.codesearch.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">12.5. Using Google Blogger </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 12.7. Using Google CodeSearch</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
