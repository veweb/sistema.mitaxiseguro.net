<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>20.5. Zeichnen</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="Programmierer Referenzhandbuch">
<link rel="up" href="zend.pdf.html" title="Kapitel 20. Zend_Pdf">
<link rel="prev" href="zend.pdf.pages.html" title="20.4. Dokument Seiten">
<link rel="next" href="zend.pdf.usage.html" title="20.6. Anwendungsbeispiel für die Zend_Pdf Komponente">
<link rel="chapter" href="zend.html" title="Kapitel 1. Zend">
<link rel="chapter" href="zend.acl.html" title="Kapitel 2. Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="Kapitel 3. Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="Kapitel 4. Zend_Cache">
<link rel="chapter" href="zend.config.html" title="Kapitel 5. Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="Kapitel 6. Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="Kapitel 7. Zend_Controller">
<link rel="chapter" href="zend.date.html" title="Kapitel 8. Zend_Date">
<link rel="chapter" href="zend.db.html" title="Kapitel 9. Zend_Db">
<link rel="chapter" href="zend.feed.html" title="Kapitel 10. Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="Kapitel 11. Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="Kapitel 12. Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="Kapitel 13. Zend_Http">
<link rel="chapter" href="zend.json.html" title="Kapitel 14. Zend_Json">
<link rel="chapter" href="zend.locale.html" title="Kapitel 15. Zend_Locale">
<link rel="chapter" href="zend.log.html" title="Kapitel 16. Zend_Log">
<link rel="chapter" href="zend.mail.html" title="Kapitel 17. Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="Kapitel 18. Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="Kapitel 19. Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="Kapitel 20. Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="Kapitel 21. Zend_Rest">
<link rel="chapter" href="zend.search.html" title="Kapitel 22. Zend_Search">
<link rel="chapter" href="zend.server.html" title="Kapitel 23. Zend_Server">
<link rel="chapter" href="zend.service.html" title="Kapitel 24. Zend_Service">
<link rel="chapter" href="zend.session.html" title="Kapitel 25. Zend_Session">
<link rel="chapter" href="zend.uri.html" title="Kapitel 26. Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="Kapitel 27. Zend_Validate">
<link rel="chapter" href="zend.view.html" title="Kapitel 28. Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="Kapitel 29. Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="Anhang A. Zend Framework PHP Coding Standard">
<link rel="appendix" href="copyrights.html" title="Anhang B. Urheberrecht Informationen">
<link rel="index" href="the.index.html" title="Stichwortverzeichnis">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.geometry" title="20.5.1. Geometrie">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.color" title="20.5.2. Farben">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.shape-drawing" title="20.5.3. Zeichnen von Formen">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.text-drawing" title="20.5.4. Zeichnen von Text">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.using-fonts" title="20.5.5. Verwendung von Zeichensätzen">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.image-drawing" title="20.5.6. Zeichnen von Grafiken">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.line-drawing-style" title="20.5.7. Stil der Strichzeichnungen">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.fill-style" title="20.5.8. Füllstil">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.rotations" title="20.5.9. Drehungen">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.save-restore" title="20.5.10. Speichern/Wiederherstellen des Grafikzustand">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.clipping" title="20.5.11. Zeichenbereich">
<link rel="subsection" href="zend.pdf.drawing.html#zend.pdf.drawing.styles" title="20.5.12. Stile">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">20.5. Zeichnen</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Zurück</a> </td>
<th width="60%" align="center">Kapitel 20. Zend_Pdf</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">Weiter</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="de">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.pdf.drawing"></a>20.5. Zeichnen</h2></div></div></div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.geometry"></a>20.5.1. Geometrie</h3></div></div></div>
<p>
            PDF verwendet die selbe Geometrie wie PostScript. Sie beginnt an der linken unteren 
            Ecke der Seite und wird in Punkten (1/72 Zoll) gemessen.
        </p>
<p>
            Die Seitengröße kann vom Seitenobjekt erhalten werden:
        </p>
<pre class="programlisting">
$width  = $pdfPage-&gt;getWidth();
$height = $pdfPage-&gt;getHeight();
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.color"></a>20.5.2. Farben</h3></div></div></div>
<p>
            PDF bietet leistungsfähige Möglichkeiten für die Farbdarstellung. Die Zend_Pdf 
            Komponente unterstützt die Grauskala sowie RGB und CYMK Farbräume. Jede kann überall 
            verwendet werden, wo ein <code class="code">Zend_Pdf_Color</code> Objekt benötigt wird. Die 
            <code class="code">Zend_Pdf_Color_GrayScale</code>, <code class="code">Zend_Pdf_Color_RGB</code> und
            <code class="code">Zend_Pdf_Color_CMYK</code> Klassen stellen folgende Funktionalitäten bereit:
        </p>
<pre class="programlisting">
// $grayLevel (Fließkommazahl). 0.0 (schwarz) - 1.0 (weiß)
$color1 = new Zend_Pdf_Color_GrayScale($grayLevel);

// $r, $g, $b (Fließkommazahlen). 0.0 (minimale Helligkeit) - 1.0 (maximale Helligkeit)
$color2 = new Zend_Pdf_Color_RGB($r, $g, $b);

// $c, $m, $y, $k (Fließkommazahlen). 0.0 (minimale Helligkeit) - 1.0 (maximale Helligkeit)
$color3 = new Zend_Pdf_Color_CMYK($c, $m, $y, $k);
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.shape-drawing"></a>20.5.3. Zeichnen von Formen</h3></div></div></div>
<p>
            Alle Zeichenoperationen können im Kontext einer PDF Seite durchgeführt werden.
        </p>
<p>
            Die <code class="code">Zend_Pdf_Page</code> Klass stellt einen Satz von einfachen Formen bereit:
        </p>
<pre class="programlisting">
/**
 * Zeichne eine Linie von x1,y1 nach x2,y2.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function drawLine($x1, $y1, $x2, $y2);
            </pre>
<pre class="programlisting">
/**
 * Zeichne ein Rechteck.
 *
 * Füllarten:
 * Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - fülle und strichele das Rechteck (Standard)
 * Zend_Pdf_Page::SHAPE_DRAW_STROKE      - strichele das Rechteck
 * Zend_Pdf_Page::SHAPE_DRAW_FILL        - fülle das Rechteck
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param integer $fillType
 */
public function drawRectangle($x1, $y1, $x2, $y2, $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE);
            </pre>
<pre class="programlisting">
/**
 * Zeichne ein Polygon
 *
 * Wenn $fillType Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE oder Zend_Pdf_Page::SHAPE_DRAW_FILL ist,
 * wird das Polygon automatisch geschlossen.
 * Für eine detaillierte Beschreibung dieser Methode schaue in eine PDF Dokumentation
 * (Kapitel 4.4.2 Path painting Operators, Filling)
 *
 * @param array $x  - Array mit Floats (die X Koordinaten der Eckpunkte)
 * @param array $y  - Array mit Floats (the Y Koordinaten der Eckpunkte)
 * @param integer $fillType
 * @param integer $fillMethod
 */
public function drawPolygon($x, $y,
                            $fillType = Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE,
                            $fillMethod = Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
            </pre>
<pre class="programlisting">
/**
 * Zeichne einen Kreis mit dem Mittelpunkt x, y dem Radius radius.
 *
 * Winkel werden im Bogenmaß angegeben
 *
 * Methoden Signaturen:
 * drawCircle($x, $y, $radius);
 * drawCircle($x, $y, $radius, $fillType);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle);
 * drawCircle($x, $y, $radius, $startAngle, $endAngle, $fillType);
 *
 *
 * Es ist kein echter Kreis, weil PDF nur kubische Bezierkurven unterstützt.
 * Aber es ist eine sehr Annäherung.
 * Es unterscheidet sich von echten Kreisen maximal um 0.00026 Radien
 * (Bei PI/8, 3*PI/8, 5*PI/8, 7*PI/8, 9*PI/8, 11*PI/8, 13*PI/8 und 15*PI/8 Winkeln).
 * Bei 0, PI/4, PI/2, 3*PI/4, PI, 5*PI/4, 3*PI/2 und 7*PI/4 ist es exakt eine Tangente zu einem Kreis.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param mixed $param4
 * @param mixed $param5
 * @param mixed $param6
 */
public function  drawCircle($x, $y, $radius, $param4 = null, $param5 = null, $param6 = null);
            </pre>
<pre class="programlisting">
/**
 * Zeichne eine Ellipse innerhalb des angegebenen Rechtecks.
 *
 * Methoden Signaturen:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $fillType);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle, $fillType);
 *
 * Winkel werden im Bogenmaß angegeben
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param mixed $param5
 * @param mixed $param6
 * @param mixed $param7
 */
public function drawEllipse($x1, $y1, $x2, $y2, $param5 = null, $param6 = null, $param7 = null);
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.text-drawing"></a>20.5.4. Zeichnen von Text</h3></div></div></div>
<p>
            Auch alle Textoperationen können im Kontext einer PDF Seite durchgeführt werden. Du 
            kannst eine einzige Textzeile an jeder Position auf der Seite durch Übergabe der X und
            Y Koordinaten für die Grundlinie zeichnen. Der aktuelle Zeichensatz und die aktuelle
            Zeichengröße werden für die Textoperationen verwendet (beachte die detaillierte 
            Beschreibung unten).
        </p>
<pre class="programlisting">
/**
 * Zeichne eine Textzeile an einer bestimmten Position.
 *
 * @param string $text
 * @param float $x
 * @param float $y
 * @param string $charEncoding (optional) Zeichencodierung des Quelltexts.
 *          Standard ist die aktuelle "locale".
 * @throws Zend_Pdf_Exception
 */
public function drawText($text, $x, $y, $charEncoding = '');
            </pre>
<div class="example">
<a name="id4863336"></a><p class="title"><b>Beispiel 20.5. Zeichne einen String auf der Seite.</b></p>
<pre class="programlisting">&lt;?php
...
$pdfPage-&gt;drawText('Hello world!', 72, 720);
...
?&gt;
            </pre>
</div>
<p>
            Standardmäßig werden Textstrings unter Verwendung der Zeichenkodierungsmethode der 
            aktuelle "locale" interpretiert. Wenn du einen String hast, der eine andere 
            Zeichenkodierungsmethode verwendet (wie zum Beispiel ein UTF-8 String, der aus einer
            Datei auf der Platte gelesen wurde, oder ein MacRoman String, der aus einer älteren
            Datenbank erhalten wurde), kannst du die Zeichenkodierung zum Zeitpunkt des Zeichnens 
            angeben und Zend_Pdf wird die Konvertierung für dich durchführen. Du kannst Quellstrings
            in jeder Kodierungsmethode übergeben, die von PHP's 
            <code class="code"><a href="http://www.php.net/manual/function.iconv.php" target="_top">iconv()</a></code>
            Funktion unterstützt wird.
        </p>
<div class="example">
<a name="id4863401"></a><p class="title"><b>Beispiel 20.6. Zeiche einen UTF-8 kodierten String auf der Seite.</b></p>
<pre class="programlisting">&lt;?php
...
// Lese einen UTF-8 kodierten String von der Platte
$unicodeString = fread($fp, 1024);

// Zeichne den String auf der Seite
$pdfPage-&gt;drawText($unicodeString, 72, 720, 'UTF-8');
...
?&gt;
            </pre>
</div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.using-fonts"></a>20.5.5. Verwendung von Zeichensätzen</h3></div></div></div>
<p>
            <code class="code">Zend_Pdf_Page::drawText()</code> verwendet den aktuellen Zeichensatz und die 
            aktuelle Zeichengröße der Seite, die mit der Methode <code class="code">Zend_Pdf_Page::setFont()</code> 
            festgelegt werden:
        </p>
<pre class="programlisting">
/**
 * Lege den aktuellen Zeichensatz fest.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
            </pre>
<p>
            PDF Dokumente unterstützt PostScript Type1 und TrueType Zeichensätze, sowie die zwei 
            speziellen PDF Typen Type3 und zusammengesetzte Zeichensätze (composite fonts). Es gibt 
            zudem 14 Type1 Standardzeichensätze, die von jedem PDF Viewer bereit gestellt werden:
            Courier (4 Stile), Helvetica (4 Stile), Times (4 Stile), Symbol und Zapf Dingbats. 
        </p>
<p>
            Die Zend_Pdf Komponente unterstützt derzeit diese 14 Standardzeichensätze sowie deine 
            eigenen TrueType Zeichensätze. Zeichensatzobjekte können über eine der zwei 
            Fabrikmethoden (factory methods) erhalten werden: 
            <code class="code">Zend_Pdf_Font::fontWithName($fontName)</code> für die 14 PDF Standardzeichensätze
            oder <code class="code">Zend_Pdf_Font::fontWithPath($filePath)</code> für eigene Zeichensätze.
        </p>
<div class="example">
<a name="id4863503"></a><p class="title"><b>Beispiel 20.7. Erstelle einen Standardzeichensatz</b></p>
<pre class="programlisting">&lt;?php
...
// Erstelle einen neuen Zeichensatz
$font = Zend_Pdf_Font::fontWithName(Zend_Pdf_Font::FONT_HELVETICA);

// Wende Zeichensatz an
$pdfPage-&gt;setFont($font, 36);
...
?&gt;
            </pre>
</div>
<p>
            Die Zeichensatzkonstanten für die 14 Standardzeichensätze sind innerhalb der 
            <code class="code">Zend_Pdf_Font</code> Klasse definiert:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>Zend_Pdf_Font::FONT_COURIER</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_COURIER_BOLDITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_ROMAN</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_TIMES_BOLDITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_BOLD</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_ITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_HELVETICA_BOLDITALIC</p></li>
<li><p>Zend_Pdf_Font::FONT_SYMBOL</p></li>
<li><p>Zend_Pdf_Font::FONT_ZAPFDINGBATS</p></li>
</ul></div>
<p>
        </p>
<p>
            Du kannst außerdem jeden individuellen TrueType Zeichensatz (welcher normalerweise eine
            '.ttf' Erweiterung hat) oder einen OpenType Zeichensatz ('.otf' Erweiterung) verwenden,
            wenn er TrueType Konturen enthält. Bisher nicht unterstützt, aber für zukünftige 
            Versionen geplant, sind Mac OS X .dfont Dateien und Microsoft TrueType Collection
            ('.ttc' Erweiterung) Dateien. 
        </p>
<p>
            Um einen TrueType Zeichensatz zu verwenden, mußt du den kompletten Verzeichnispfad zum
            Zeichensatzprogramm angeben. Wenn der Zeichensatz aus welchem Grund auch immer nicht 
            gelesen werden kann oder wenn es kein TrueType Zeichensatz ist, wird the Fabrikmethode
            eine Ausnahme werfen:
        </p>
<div class="example">
<a name="id4863667"></a><p class="title"><b>Beispiel 20.8. Erstelle einen TrueType Zeichensatz.</b></p>
<pre class="programlisting">&lt;?php
...
// Erstelle einen neuen Zeichensatz
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF');

// Verwende den Zeichensatz
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
?&gt;
            </pre>
</div>
<p>
            Standardmäßig werden eigene Zeichensätze in das erstellte PDF Dokument eingebettet. Dies
            ermöglicht den Empfänger, die Seite wie beabsichtigt anzuschauen, sogar wenn sie den 
            entsprechenden Zeichensatz auf ihrem System gar nicht installiert haben. Wenn du dich
            über die Dateigröße sorgst, kannst du angeben, dass das Zeichensatzprogramm nicht
            eingebettet wird, indem du eine 'nicht einbetten' Option an die Fabrikmethode übergibst:
        </p>
<div class="example">
<a name="id4863703"></a><p class="title"><b>Beispiel 20.9. Erstelle einen TrueType Zeichensatz, aber bette ihn nicht in das PDF Dokument ein.</b></p>
<pre class="programlisting">&lt;?php
...
// Erstelle einen neuen Zeichensatz
$goodDogCoolFont = Zend_Pdf_Font::fontWithPath('/path/to/GOODDC__.TTF',
                                               Zend_Pdf_Font::EMBED_DONT_EMBED);

// Verwende den Zeichensatz
$pdfPage-&gt;setFont($goodDogCoolFont, 36);
...
?&gt;
            </pre>
</div>
<p>
            Wenn das Zeichensatzprogramm nicht eingebettet wurde, aber den Empfänger der PDF Datei
            diesen Zeichensatz auf seinem System installiert hat, wird er das Dokument so sehen wie
            beabsichtigt. Wenn sie nicht den korrekten Zeichensatz installiert haben, wird der PDF
            Viewer sich bemühen, um einen Ersatz herzustellen.
        </p>
<p>
            Einige Zeichensätze haben sehr spezielle Lizensierungsregeln, die das Einbetten in PDF
            Dokumente verhindern. Damit du dadurch nicht überrascht wirst, wenn du versuchst einen
            Zeichensatz einzubetten, der nicht eingebettet werden kann, wird die Fabrikmethode eine
            Ausnahme werfen.
        </p>
<p>
            Du kannst diese Zeichensätze weiterhin verwenden, aber du mußt entweder die 'nicht 
            einbetten' Option übergeben wie oben beschrieben oder du kannst einfach die Ausnahme 
            unterdrücken:
        </p>
<div class="example">
<a name="id4863770"></a><p class="title"><b>Beispiel 20.10. Werfe keine Ausnahme für Zeichensätze, die nicht eingebettet werden können.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/unEmbeddableFont.ttf',
                                    Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION);
...
?&gt;
            </pre>
</div>
<p>
            Diese Unterdrückungstechnik wird bevorzugt, wenn du einen Endnutzer erlaubst, seine 
            eigenen Zeichensätze auszuwählen. Zeichensätze, die in ein PDF Dokument eingebettet 
            werden können, werden eingebettet, andere nicht.
        </p>
<p>
            Zeichensatzprogramme können sehr groß sein, manche erreichen Dutzende von Megabytes.
            Standardmäßig werden alle eingebetteten Zeichensätze unter Verwendung des Flate
            Kompressionsschemas komprimiert, woraus im Schnitt 50% an Speicherplatz gespart werden
            kann. Wenn du aus welchem Grund auch immer nicht möchtest, dass das Zeichensatzprogramm
            kompimiert wird, kannst du dies mit einer Option abschalten:
        </p>
<div class="example">
<a name="id4863030"></a><p class="title"><b>Beispiel 20.11. Komprimiere einen eingebetten Zeichensatz nicht.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath('/path/to/someReallyBigFont.ttf',
                                    Zend_Pdf_Font::EMBED_DONT_COMPRESS);
...
?&gt;
            </pre>
</div>
<p>
            Zuguterletzt, kannst du die Einbettungsoptionen mit Hilfe des OR Operators kombinieren,
            wenn notwendig:
        </p>
<div class="example">
<a name="id4863064"></a><p class="title"><b>Beispiel 20.12. Kombiniere die Zeichensatz Einbettungsoptionen.</b></p>
<pre class="programlisting">&lt;?php
...
$font = Zend_Pdf_Font::fontWithPath($someUserSelectedFontPath,
                                    (Zend_Pdf_Font::EMBED_SUPPRESS_EMBED_EXCEPTION |
                                     Zend_Pdf_Font::EMBED_DONT_COMPRESS));
...
?&gt;
            </pre>
</div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.image-drawing"></a>20.5.6. Zeichnen von Grafiken</h3></div></div></div>
<p>
            Die <code class="code">Zend_Pdf_Page</code> Klasse stellt die drawImage() Methode für das Zeichnen
            von Grafiken bereit:
        </p>
<pre class="programlisting">
/**
 * Zeichne eine Grafik an der angegebenen Position der Seite.
 *
 * @param Zend_Pdf_Image $image
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function drawImage(Zend_Pdf_Image $image, $x1, $y1, $x2, $y2);
            </pre>
<p>
            Grafikobjekte werden durch Ableitungen der <code class="code">Zend_Pdf_Image</code> Klasse 
            abgebildet.
        </p>
<p>
            Es werden zur Zeit JPG, PNG und TIFF Grafiken unterstützt:
        </p>
<div class="example">
<a name="id4863141"></a><p class="title"><b>Beispiel 20.13. Zeichnen von Grafiken</b></p>
<pre class="programlisting">&lt;?php
...
// Erstelle ein Grafikobjekt direkt (wähle eines aus)
$image = new Zend_Pdf_Image_JPEG('my_image.jpg');
$image = new Zend_Pdf_Image_TIFF('my_image.tiff');
$image = new Zend_Pdf_Image_PNG('my_image.png');

// oder verwende Zend_Pdf_ImageFactory um den entsprechenden Typ zu laden
$image = Zend_Pdf_ImageFactory::factory('my_image.jpg');

$pdfPage-&gt;drawImage($image, 100, 100, 400, 300);
...
?&gt;
            </pre>
</div>
<p>
            <span class="emphasis"><em>Wichtig! Die Zend_Pdf_Image_JPEG Klasse setzt voraus, dass die GD 
            Erweiterung für PHP konfiguriert wurde.</em></span>
            <span class="emphasis"><em>Wichtig! Die Zend_Pdf_Image_PNG Klasse setzt voraus, dass die ZLIB 
            Erweiterung konfiguriert wurde, um mit Grafiken mit Alphakanal zu arbeiten.</em></span>
        </p>
<p>
            Wende dich an die PHP Dokumentation für weitere Informationen
            (<a href="http://www.php.net/manual/en/ref.image.php" target="_top">http://www.php.net/manual/en/ref.image.php</a>).
            (<a href="http://www.php.net/manual/en/ref.zlib.php" target="_top">http://www.php.net/manual/en/ref.zlib.php</a>).
        </p>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.line-drawing-style"></a>20.5.7. Stil der Strichzeichnungen</h3></div></div></div>
<p>
            Der Stil der Strichzeichnungen wurd durch die Linienbreite, die Linienfarbe und das
            Strichmuster definiert. Alle diese Parameter können an die Klassenmethoden von 
            <code class="code">Zend_Pdf_Page</code> übergeben werden:
        </p>
<pre class="programlisting">
/** Setze die Linienfarbe. */
public function setLineColor(Zend_Pdf_Color $color);

/** Setze die Linienbreite. */
public function setLineWidth(float $width);

/**
 * Setze das Strichmuster.
 *
 * Pattern ist ein Array mit Fließkommazahlen: array(on_length, off_length, on_length, off_length, ...)
 * Phase is shift from the beginning of line.
 *
 * @param array $pattern
 * @param array $phase
 */
public function setLineDashingPattern($pattern, $phase = 0);
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.fill-style"></a>20.5.8. Füllstil</h3></div></div></div>
<p>
            Die Methoden <code class="code">Zend_Pdf_Page::drawRectangle()</code>, 
            <code class="code">Zend_Pdf_Page::drawPolygon()</code>, <code class="code">Zend_Pdf_Page::drawCircle()</code> und 
            <code class="code">Zend_Pdf_Page::drawEllipse()</code> akzeptieren das <code class="code">$fillType</code> 
            Argument als optionalen Parameter. Es kann lauten:
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>Zend_Pdf_Page::SHAPE_DRAW_STROKE - strichele die Form</p></li>
<li><p>Zend_Pdf_Page::SHAPE_DRAW_FILL - fülle die Form</p></li>
<li><p>Zend_Pdf_Page::SHAPE_DRAW_FILL_AND_STROKE - fülle und strichele die Form 
                (Standardverhalten)</p></li>
</ul></div>
<p>
            Die <code class="code">Zend_Pdf_Page::drawPolygon()</code> Methode akzeptiert 
            <code class="code">$fillMethod</code> als zusätzlichen Parameter:
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING (Standardverhalten)</p>
<p>
                <em class="citetitle">Die PDF Referenz</em> beschreibt diese Regel wie folgt:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
The nonzero winding number rule determines whether a given point is inside a
path by conceptually drawing a ray from that point to infinity in any direction
and then examining the places where a segment of the path crosses the ray. Starting
with a count of 0, the rule adds 1 each time a path segment crosses the ray
from left to right and subtracts 1 each time a segment crosses from right to left.
After counting all the crossings, if the result is 0 then the point is outside the path;
otherwise it is inside.

Note: The method just described does not specify what to do if a path segment coincides
with or is tangent to the chosen ray. Since the direction of the ray is arbitrary,
the rule simply chooses a ray that does not encounter such problem intersections.
For simple convex paths, the nonzero winding number rule defines the inside
and outside as one would intuitively expect. The more interesting cases are those
involving complex or self-intersecting paths like the ones shown in Figure 4.10
(in a PDF Reference).

For a path consisting of a five-pointed star, drawn with five connected straight
line segments intersecting each other, the rule considers the inside to be the entire
area enclosed by the star, including the pentagon in the center. For a path composed
of two concentric circles, the areas enclosed by both circles are considered
to be inside, provided that both are drawn in the same direction. If the circles are
drawn in opposite directions, only the "doughnut" shape between them is inside,
according to the rule; the "doughnut hole" is outside.
                </p></blockquote></div>
<p>
            </p>
</li>
<li>
<p>Zend_Pdf_Page::FILL_METHOD_EVEN_ODD</p>
<p>
                <em class="citetitle">Die PDF Referenz</em> beschreibt diese Regel wie folgt:
                </p>
<div class="blockquote"><blockquote class="blockquote"><p>
An alternative to the nonzero winding number rule is the even-odd rule. This rule
determines the "insideness" of a point by drawing a ray from that point in any
direction and simply counting the number of path segments that cross the ray,
regardless of direction. If this number is odd, the point is inside; if even, the point
is outside. This yields the same results as the nonzero winding number rule for
paths with simple shapes, but produces different results for more complex
shapes.

Figure 4.11 (in a PDF Reference) shows the effects of applying the even-odd rule
to complex paths. For the five-pointed star, the rule considers the triangular
points to be inside the path, but not the pentagon in the center. For the two
concentric circles, only the "doughnut" shape between the two circles is considered inside,
regardless of the directions in which the circles are drawn.
                    </p></blockquote></div>
<p>
            </p>
</li>
</ul></div>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.rotations"></a>20.5.9. Drehungen</h3></div></div></div>
<p>
            Bevor eine Zeichenoperation angewendet wird, können PDF Seiten gedreht werden. Dies 
            kann mit Hilfe der <code class="code">Zend_Pdf_Page::rotate()</code> Methode durchgeführt werden:
        </p>
<pre class="programlisting">
/**
 * Drehe die Seite um den Punkt ($x, $y) mit dem angegebenen Winkel (im Bogenmaß).
 *
 * @param float $angle
 */
public function rotate($x, $y, $angle);
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.save-restore"></a>20.5.10. Speichern/Wiederherstellen des Grafikzustand</h3></div></div></div>
<p>
            Jederzeit kann der Grafikzustand der Seite (aktueller Zeichensatz, Schriftgröße, 
            Linienfarbe, Füllfarbe, Linienstil, Seitendrehung, Zeichenbereich) gespeichert und 
            wiederhergestellt werden. Speicheroperationen legen die Daten auf einen Grafikzustand 
            Stapel, Wiederherstelloperationen holen Sie daher zurück. 
        </p>
<p>
            In der <code class="code">Zend_Pdf_Page</code> Klasse gibt es für diese Operationen zwei Methoden:
        </p>
<pre class="programlisting">
/**
 * Speichere den Grafikzustand dieser Seite.
 * Es wir ein Schnappschuss vom aktuell festgelegten Stil, Position, Zeichenbereich und
 * jeder festgelegten Drehung/Umrechnung/Skalierung erstellt.
 */
public function saveGS();

/**
 * Stelle den Grafikzustand wieder her, der mit dem letzten Aufruf von saveGS() gespeichert wurde.
 */
public function restoreGS();
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.clipping"></a>20.5.11. Zeichenbereich</h3></div></div></div>
<p>
            PDF und die Zend_Pdf Komponente unterstützen die Begrenzung des Zeichenbereichs. Der
            aktuelle Zeichenbereich begrenzt den Seitenbereich, der von Zeichenoperationen 
            beeinflusst werden kann. Zu Beginn ist dies die gesamte Seite.
        </p>
<p>
            Die <code class="code">Zend_Pdf_Page</code> Klasse stellt einen Satz von Methoden für die Begrenzung
            bereit.
        </p>
<pre class="programlisting">
/**
 * Durchschneide den aktuellen Zeichenbereich mit einem Rechteck.
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 */
public function clipRectangle($x1, $y1, $x2, $y2);
            </pre>
<pre class="programlisting">
/**
 * Durchschneide den aktuellen Zeichenbereich mit einem Polygon.
 *
 * @param array $x  - Array mit Floats (die X Koordinaten der Eckpunkte)
 * @param array $y  - Array mit Floats (die Y Koordinaten der Eckpunkte)
 * @param integer $fillMethod
 */
public function clipPolygon($x, $y, $fillMethod = Zend_Pdf_Page::FILL_METHOD_NON_ZERO_WINDING);
            </pre>
<pre class="programlisting">
/**
 * Durchschneide den aktuellen Zeichenbereich mit einem Kreis.
 *
 * @param float $x
 * @param float $y
 * @param float $radius
 * @param float $startAngle
 * @param float $endAngle
 */
public function clipCircle($x, $y, $radius, $startAngle = null, $endAngle = null);
            </pre>
<pre class="programlisting">
/**
 * Durchschneide den aktuellen Zeichenbereich mit einer Ellipse.
 *
 * Methoden Signaturen:
 * drawEllipse($x1, $y1, $x2, $y2);
 * drawEllipse($x1, $y1, $x2, $y2, $startAngle, $endAngle);
 *
 * @todo verarbeite die Sonderfälle mit $x2-$x1 == 0 oder $y2-$y1 == 0
 *
 * @param float $x1
 * @param float $y1
 * @param float $x2
 * @param float $y2
 * @param float $startAngle
 * @param float $endAngle
 */
public function clipEllipse($x1, $y1, $x2, $y2, $startAngle = null, $endAngle = null);
            </pre>
</div>
<div class="sect2" lang="de">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.pdf.drawing.styles"></a>20.5.12. Stile</h3></div></div></div>
<p>
            Die <code class="code">Zend_Pdf_Style</code> Klasse stellt Stilfunktionalitäten bereit.
        </p>
<p>
            Stile können verwendet werden, um mit einer Operation die Parameter für den 
            Grafikzustand zu speichern und auf eine PDF Seite anzuwenden:
        </p>
<pre class="programlisting">
/**
 * Lege den Stil für zukünftige Zeichenoperationen auf dieser Seite fest
 *
 * @param Zend_Pdf_Style $style
 */
public function setStyle(Zend_Pdf_Style $style);

/**
 * Gebe den Stil der Seite zurück.
 *
 * @return Zend_Pdf_Style|null
 */
public function getStyle();
            </pre>
<p>
            Die <code class="code">Zend_Pdf_Style</code> Klasse stellt einen Satz von Methoden bereit, um 
            verschiedene Parameter des Grafikstadiums zu setzen und zu holen:
        </p>
<pre class="programlisting">
/**
 * Setze die Linienfarbe.
 *
 * @param Zend_Pdf_Color $color
 */
public function setLineColor(Zend_Pdf_Color $color);
            </pre>
<pre class="programlisting">
/**
 * Hole die Linienfarbe.
 *
 * @return Zend_Pdf_Color|null
 */
public function getLineColor();
            </pre>
<pre class="programlisting">
/**
 * Setze die Linienbreite.
 *
 * @param float $width
 */
public function setLineWidth($width);
            </pre>
<pre class="programlisting">
/**
 * Hole die Linienbreite.
 *
 * @return float
 */
public function getLineWidth();
            </pre>
<pre class="programlisting">
/**
 * Setze das Strichmuster
 *
 * @param array $pattern
 * @param float $phase
 */
public function setLineDashingPattern($pattern, $phase = 0);
            </pre>
<pre class="programlisting">
/**
 * Hole das Strichmuster
 *
 * @return array
 */
public function getLineDashingPattern();
            </pre>
<pre class="programlisting">
/**
 * Get line dashing phase
 *
 * @return float
 */
public function getLineDashingPhase();
            </pre>
<pre class="programlisting">
/**
 * Setze die Füllfarbe
 *
 * @param Zend_Pdf_Color $color
 */
public function setFillColor(Zend_Pdf_Color $color);
            </pre>
<pre class="programlisting">
/**
 * Hole die Füllfarbe.
 *
 * @return Zend_Pdf_Color|null
 */
public function getFillColor();
            </pre>
<pre class="programlisting">
/**
 * Ändere den Zeichensatz.
 *
 * @param Zend_Pdf_Resource_Font $font
 * @param float $fontSize
 */
public function setFont(Zend_Pdf_Resource_Font $font, $fontSize);
            </pre>
<pre class="programlisting">
/**
 * Ändere die Schriftgröße
 *
 * @param float $fontSize
 */
public function setFontSize($fontSize);
            </pre>
<pre class="programlisting">
/**
 * Hole den Zeichensatz.
 *
 * @return Zend_Pdf_Resource_Font $font
 */
public function getFont();
            </pre>
<pre class="programlisting">
/**
 * Hole die Schriftgröße
 *
 * @return float $fontSize
 */
public function getFontSize();
            </pre>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.pdf.pages.html">Zurück</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.pdf.html">Nach oben</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">Weiter</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">20.4. Dokument Seiten </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">Zum Anfang</a></td>
<td width="40%" align="right" valign="top"> 20.6. Anwendungsbeispiel für die Zend_Pdf Komponente</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
