<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>7.2. さあ、はじめましょう</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="プログラマ向けリファレンスガイド">
<link rel="up" href="zend.controller.html" title="第7章 Zend_Controller">
<link rel="prev" href="zend.controller.html" title="第7章 Zend_Controller">
<link rel="next" href="zend.controller.subclassing.html" title="7.3. サブクラス化">
<link rel="chapter" href="zend.html" title="第1章 Zend">
<link rel="chapter" href="zend.acl.html" title="第2章 Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="第3章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第4章 Zend_Cache">
<link rel="chapter" href="zend.config.html" title="第5章 Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="第6章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第7章 Zend_Controller">
<link rel="chapter" href="zend.date.html" title="第8章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第9章 Zend_Db">
<link rel="chapter" href="zend.feed.html" title="第10章 Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="第11章 Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="第12章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第13章 Zend_Http">
<link rel="chapter" href="zend.json.html" title="第14章 Zend_Json">
<link rel="chapter" href="zend.locale.html" title="第15章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第16章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第17章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第18章 Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="第19章 Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="第20章 Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="第21章 Zend_Rest">
<link rel="chapter" href="zend.search.html" title="第22章 Zend_Search">
<link rel="chapter" href="zend.server.html" title="第23章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第24章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第25章 Zend_Session">
<link rel="chapter" href="zend.uri.html" title="第26章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第27章 Zend_Validate">
<link rel="chapter" href="zend.view.html" title="第28章 Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="第29章 Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="付録 A. Zend Framework PHP 標準コーディング規約">
<link rel="appendix" href="copyrights.html" title="付録 B. 著作権に関する情報">
<link rel="index" href="the.index.html" title="目次">
<link rel="subsection" href="zend.controller.getting-started.html#zend.controller.getting-started.introduction" title="7.2.1. 導入">
<link rel="subsection" href="zend.controller.getting-started.html#zend.controller.getting-started.server-configuration" title="7.2.2. サーバの設定">
<link rel="subsection" href="zend.controller.getting-started.html#zend.controller.getting-started.bootstrap" title="7.2.3. 起動用ファイル">
<link rel="subsection" href="zend.controller.getting-started.html#zend.controller.getting-started.directory-structure" title="7.2.4. ディレクトリ構造">
<link rel="subsection" href="zend.controller.getting-started.html#zend.controller.overview.defaultcontroller" title="7.2.5. デフォルトのコントローラ">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">7.2. さあ、はじめましょう</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.controller.html">前のページ</a> </td>
<th width="60%" align="center">第7章 Zend_Controller</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.controller.subclassing.html">次のページ</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="ja">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.controller.getting-started"></a>7.2. さあ、はじめましょう</h2></div></div></div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.getting-started.introduction"></a>7.2.1. 導入</h3></div></div></div>
<p>
            <code class="code">Zend_Controller</code> システムは、拡張性を考慮して作成されています。
            拡張方法としては、既存のクラスを継承する以外にも、
            コントローラファミリを構成するさまざまなインターフェイスや抽象クラスを実装した
            新しいクラスを作成する方法があります。
        </p>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.getting-started.server-configuration"></a>7.2.2. サーバの設定</h3></div></div></div>
<p>
            Zend_Controller は、クリーンな (クエリ文字列をほとんど使用しない) URI
            をサポートするように作成されています。この推奨設定を使用するためには、ウェブサーバが
            URI の書き換えをサポートしており、全てのリクエストを単一のファイル
            (ここでは "index.php" とします。これは単に
            <code class="code">Zend_Controller_Front</code> を呼び出すだけです)
            にリダイレクトできなければなりません。
            Apache では、この機能はオプションのモジュール mod_rewrite でサポートされています。
        </p>
<p>
            サーバを設定するための第一歩は、まずきちんとインストールして
            mod_rewrite を有効にすることです。次に、.htaccess と index.php
            の 2 つのファイルをドキュメントルートに配置します。
            .htaccess は Apache が使用するファイルで、
            すべてのリクエストを index.php にリダイレクトさせるための
            mod_rewrite のルールをここに記述します。開発中なら、
            特定の拡張子のファイル以外をすべて index.php
            にリダイレクトさせるような単純なルールを設定しておけばよいでしょう。
            例えばこのようになります。
        </p>
<pre class="programlisting">
RewriteEngine on
RewriteRule !\.(js|ico|gif|jpg|png|css)$ index.php
</pre>
<p>
            上の例では、指定した拡張子以外のすべてのファイルに対するリクエストが
            index.php に渡されます。開発中にはこれで十分ですが、
            実運用環境では、リダイレクトしないディレクトリを指定するなどの記述が必要でしょう。
        </p>
<div class="note"><table border="0" summary="Note: 起動用ファイルの場所">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">起動用ファイルの場所</th>
</tr>
<tr><td align="left" valign="top"><p>
                ドキュメントルートに配置する PHP ファイルは、
                この起動用ファイルだけにしておくべきです。
            </p></td></tr>
</table></div>
<p>
            Zend_Controller の基本機能として、クエリパラメータを含む URL
            もサポートしています。たとえば
            <code class="code">index.php?controller=foo&amp;action=bar</code> のような形式です。
            さらに、同梱されているもうひとつのルータである
            <code class="code">Zend_Controller_RewriteRouter</code>
            は、多くの環境で (mod_rewrite 的な機能を持たない環境でも) 動作します。
            mod_rewrite を使用できない場合でも、あなたのサイトで
            Zend_Controller を使用することが可能です。
        </p>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.getting-started.bootstrap"></a>7.2.3. 起動用ファイル</h3></div></div></div>
<p>
            .htaccess ファイルの設定が終われば、次に <code class="code">index.php</code>
            という新しいファイルを作成します。これが起動用ファイルとなります。
            index.php は、単に Zend_Controller_Front を起動するためだけに使用します。
            Zend_Controller_Front はドキュメントルートの外に配置します。
        </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
                ドキュメントルートに配置する PHP ファイルは、
                この起動用ファイルだけにしておくべきです。
            </p></td></tr>
</table></div>
<p>
            セキュリティ上、他の PHP ファイルはウェブサーバからアクセスできない場所
            (ドキュメントルートの配下ではない場所) に置くことを Zend として強く推奨します。
            共有ホスティング環境など思い通りにいかない環境もあることは理解しますが、
            可能な限り推奨設定に従うようにしてください。
        </p>
<p>
            Zend_Controller_Front を起動するための起動用ファイル
            <code class="code">index.php</code> をドキュメントルートに作成します。
        </p>
<pre class="programlisting">&lt;?php

require_once 'Zend/Controller/Front.php';

Zend_Controller_Front::run('/path/to/your/controllers');

?&gt;</pre>
<p>
            <code class="code">/path/to/your/controllers</code> の部分に関しては、次の節を参照ください。

            <code class="code">README.txt</code> に記述されているように、
            Zend Framework ライブラリのディレクトリは <code class="code">include_path</code>
            に置かなければなりません。<code class="code">include_path</code> が <code class="code">php.ini</code>
            で設定されていない場合は、このファイルで <code class="code">require_once()</code>
            する前に <code class="code">set_include_path()</code> をコールして設定することができます。
        </p>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.getting-started.directory-structure"></a>7.2.4. ディレクトリ構造</h3></div></div></div>
<p>
            Zend Framework で構築したウェブサイトは、
            共通のディレクトリ構造を共有することを推奨します。
            すべてとは言いませんが、できるだけこの構造にあわせるようにしましょう。
            そうすることで、Zend Framework の規約に慣れている人々にとって、
            あなたのコードがより理解しやすいものとなります。
        </p>
<p>
            推奨する構造は、(Zend およびその他の) ライブラリ用のディレクトリと
            アプリケーションのディレクトリを別に分けるものです。
        </p>
<pre class="programlisting">
/application
  /models
  /views
  /controllers
/document_root
  /images
  /styles
  .htaccess
  index.php
/library
  /Zend
</pre>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
                この節は未完成です。現在作成中であり、今後変わる可能性があります。
            </p></td></tr>
</table></div>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.controller.overview.defaultcontroller"></a>7.2.5. デフォルトのコントローラ</h3></div></div></div>
<p>
            デフォルトのコントローラは、必ず指定しなければなりません。
            URI にコントローラが指定されなかった場合、例えば次のような
            URI が指定された場合に、このコントローラが使用されます。
        </p>
<pre class="programlisting">
http://framework.zend.com/
</pre>
<p>
            初期設定では、デフォルトのコントローラは
            <code class="code">IndexController</code> という名前のクラスで、
            <code class="code">IndexController.php</code> というファイルで定義されなければなりません。
            内部的には、これは 'index' コントローラとして参照されます。
        </p>
<p>
            フロントコントローラでのディスパッチに先立ってデフォルトのコントローラを変更するには、
            フロントコントローラあるいはディスパッチャオブジェクトで
            <code class="code">setDefaultController()</code> メソッドをコールします。
            その際には、内部の命名規約を使用します。つまり、クラス
            <code class="code">HomeController</code> (ファイル <code class="code">HomeController.php</code>
            に記述されたもの) を参照するには <code class="code">home</code> と指定します。
        </p>
<p>
            コントローラは <code class="code">Zend_Controller_Action</code>
            クラスをを継承し、コントローラのディレクトリになければなりません。
        </p>
<pre class="programlisting">&lt;?php

require_once 'Zend/Controller/Action.php';

class IndexController extends Zend_Controller_Action
{
    public function indexAction()
    {
        echo 'IndexController からこんにちは';
    }

    public function noRouteAction()
    {
        $this-&gt;_redirect('/');
    }
}

?&gt;</pre>
<p>
            デフォルトのコントローラおよびアクションについての詳細、
            そしてアクションコントローラクラスの作成方法については
            後の章で説明します。
        </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
                この節は未完成です。現在作成中であり、今後変わる可能性があります。
            </p></td></tr>
</table></div>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.controller.html">前のページ</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.controller.html">上に戻る</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.controller.subclassing.html">次のページ</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">第7章 Zend_Controller </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td>
<td width="40%" align="right" valign="top"> 7.3. サブクラス化</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
