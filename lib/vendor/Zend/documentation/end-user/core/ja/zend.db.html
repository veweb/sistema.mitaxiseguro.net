<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>第9章 Zend_Db</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.69.1">
<link rel="start" href="index.html" title="プログラマ向けリファレンスガイド">
<link rel="up" href="index.html" title="プログラマ向けリファレンスガイド">
<link rel="prev" href="zend.date.constants.html" title="8.5. 日付関数全般用の定数">
<link rel="next" href="zend.db.profiler.html" title="9.2. Zend_Db_Profiler">
<link rel="chapter" href="zend.html" title="第1章 Zend">
<link rel="chapter" href="zend.acl.html" title="第2章 Zend_Acl">
<link rel="chapter" href="zend.auth.html" title="第3章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第4章 Zend_Cache">
<link rel="chapter" href="zend.config.html" title="第5章 Zend_Config">
<link rel="chapter" href="zend.console.getopt.html" title="第6章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第7章 Zend_Controller">
<link rel="chapter" href="zend.date.html" title="第8章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第9章 Zend_Db">
<link rel="chapter" href="zend.feed.html" title="第10章 Zend_Feed">
<link rel="chapter" href="zend.filter.html" title="第11章 Zend_Filter">
<link rel="chapter" href="zend.gdata.html" title="第12章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第13章 Zend_Http">
<link rel="chapter" href="zend.json.html" title="第14章 Zend_Json">
<link rel="chapter" href="zend.locale.html" title="第15章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第16章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第17章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第18章 Zend_Measure">
<link rel="chapter" href="zend.mime.html" title="第19章 Zend_Mime">
<link rel="chapter" href="zend.pdf.html" title="第20章 Zend_Pdf">
<link rel="chapter" href="zend.rest.html" title="第21章 Zend_Rest">
<link rel="chapter" href="zend.search.html" title="第22章 Zend_Search">
<link rel="chapter" href="zend.server.html" title="第23章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第24章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第25章 Zend_Session">
<link rel="chapter" href="zend.uri.html" title="第26章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第27章 Zend_Validate">
<link rel="chapter" href="zend.view.html" title="第28章 Zend_View">
<link rel="chapter" href="zend.xmlrpc.html" title="第29章 Zend_XmlRpc">
<link rel="appendix" href="coding-standard.html" title="付録 A. Zend Framework PHP 標準コーディング規約">
<link rel="appendix" href="copyrights.html" title="付録 B. 著作権に関する情報">
<link rel="index" href="the.index.html" title="目次">
<link rel="section" href="zend.db.html#zend.db.adapter" title="9.1. Zend_Db_Adapter">
<link rel="section" href="zend.db.profiler.html" title="9.2. Zend_Db_Profiler">
<link rel="section" href="zend.db.select.html" title="9.3. Zend_Db_Select">
<link rel="section" href="zend.db.table.html" title="9.4. Zend_Db_Table">
<link rel="section" href="zend.db.tablerow.html" title="9.5. Zend_Db_Table_Row">
<link rel="section" href="zend.db.tablerowset.html" title="9.6. Zend_Db_Table_Rowset">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">第9章 Zend_Db</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.date.constants.html">前のページ</a> </td>
<th width="60%" align="center"> </th>
<td width="20%" align="right"> <a accesskey="n" href="zend.db.profiler.html">次のページ</a>
</td>
</tr>
</table></div>
<div class="chapter" lang="ja">
<div class="titlepage"><div><div><h2 class="title">
<a name="zend.db"></a>第9章 Zend_Db</h2></div></div></div>
<div class="toc">
<p><b>目次</b></p>
<dl>
<dt><span class="sect1"><a href="zend.db.html#zend.db.adapter">9.1. Zend_Db_Adapter</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.introduction">9.1.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.quoting">9.1.2. SQL インジェクション対策のクォート処理</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.queries">9.1.3. クエリを直接実行する</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.transactions">9.1.4. トランザクション</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.insert">9.1.5. 行の挿入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.update">9.1.6. 行の更新</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.delete">9.1.7. 行の削除</a></span></dt>
<dt><span class="sect2"><a href="zend.db.html#zend.db.adapter.fetch">9.1.8. 行の取得</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.db.profiler.html">9.2. Zend_Db_Profiler</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.profiler.html#zend.db.profiler.introduction">9.2.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.profiler.html#zend.db.profiler.using">9.2.2. プロファイラの使用</a></span></dt>
<dt><span class="sect2"><a href="zend.db.profiler.html#zend.db.profiler.advanced">9.2.3. プロファイラの高度な使用法</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.db.select.html">9.3. Zend_Db_Select</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.introduction">9.3.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.fromcols">9.3.2. テーブルからのカラムの取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.joincols">9.3.3. JOIN されたテーブルからのカラムの取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.where">9.3.4. WHERE 条件</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.group">9.3.5. GROUP BY 句</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.having">9.3.6. HAVING 条件</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.order">9.3.7. ORDER BY 句</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.limit">9.3.8. 件数やオフセットによる制限</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#zend.db.select.paging">9.3.9. ページ数や件数による制限</a></span></dt>
<dt><span class="sect2"><a href="zend.db.select.html#id4825926">9.3.10. その他のメソッド</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.db.table.html">9.4. Zend_Db_Table</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.introduction">9.4.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.getting-started">9.4.2. さあ、はじめましょう</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.name-and-key">9.4.3. テーブル名および主キー</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.insert">9.4.4. 行の挿入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.udpate">9.4.5. 行の更新</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.delete">9.4.6. 行の削除</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.findbykey">9.4.7. 主キーによる行の検索</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.fetchonerow">9.4.8. 単一の行の取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.fetchmultiple">9.4.9. 複数の行の取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.table.html#zend.db.table.domain-logic">9.4.10. ドメインロジックの追加</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.db.tablerow.html">9.5. Zend_Db_Table_Row</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.tablerow.html#zend.db.table.row.introduction">9.5.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.tablerow.html#zend.db.table.row.fetch">9.5.2. 行の取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.tablerow.html#zend.db.table.row.modify">9.5.3. 値の変更</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="zend.db.tablerowset.html">9.6. Zend_Db_Table_Rowset</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="zend.db.tablerowset.html#zend.db.table.rowset.introduction">9.6.1. 導入</a></span></dt>
<dt><span class="sect2"><a href="zend.db.tablerowset.html#zend.db.table.rowset.fetch">9.6.2. 行セットの取得</a></span></dt>
<dt><span class="sect2"><a href="zend.db.tablerowset.html#zend.db.table.rowset.iterate">9.6.3. 行セットの順次処理</a></span></dt>
</dl></dd>
</dl>
</div>
<div class="sect1" lang="ja">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.db.adapter"></a>9.1. Zend_Db_Adapter</h2></div></div></div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.introduction"></a>9.1.1. 導入</h3></div></div></div>
<p>
            <code class="code">Zend_Db_Adapter</code> は、Zend Framework
            におけるデータベース API の抽象化レイヤーです。PDO に基づいており、
            <code class="code">Zend_Db_Adapter</code> を使用すると、サポートしている
            SQL データベースへの接続やデータベースに対する操作を同じ API で行えます。
            Microsoft SQL Server、MySQL、PostgreSQL、SQLite などをサポートしています。
        </p>
<p>
        バックエンドのデータベースに対応した <code class="code">Zend_Db_Adapter</code>
        のインスタンスを作成するには、接続パラメータの配列とアダプタの名前を渡して
        <code class="code">Zend_Db::factory()</code> をコールする必要があります。
        例えば、ローカルホスト上の MySQL データベース "camelot"
        に対して "malory" というユーザで接続するには、以下のようにします。
        </p>
<pre class="programlisting">&lt;?php

require_once 'Zend/Db.php';

$params = array ('host'     =&gt; '127.0.0.1',
                 'username' =&gt; 'malory',
                 'password' =&gt; '******',
                 'dbname'   =&gt; 'camelot');

$db = Zend_Db::factory('PDO_MYSQL', $params);

?&gt;</pre>
<p>
            同様に、SQLite データベース "camelot.sq3" に接続するには、以下のようにします。
        </p>
<pre class="programlisting">&lt;?php

require_once 'Zend/Db.php';

$params = array ('dbname' =&gt; 'camelot.sq3');

$db = Zend_Db::factory('PDO_SQLITE', $params);

?&gt;</pre>
<p>
            同様に、SQLite2 データベース "camelot.sq2" に接続するには、以下のようにします。
            メモリ上の sqlite データベースの場合は dsnprefix を指定せず、
            dbname に ":memory:" を使用します。
        </p>
<pre class="programlisting">&lt;?php

require_once 'Zend/Db.php';

$params = array ('dbname' =&gt; 'camelot.sq2',
                 'dsnprefix' =&gt; 'sqlite2');

$db = Zend_Db::factory('pdoSqlite', $params);

?&gt;</pre>
<p>
            どの場合についても、まったく同じ API
            でデータベースに対する問い合わせを行うことができます。
        </p>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.quoting"></a>9.1.2. SQL インジェクション対策のクォート処理</h3></div></div></div>
<p>
            SQL 文で使用する値は、常にクォートしなければなりません。
            これにより、SQL インジェクション攻撃を防ぎます。
            <code class="code">Zend_Db_Adapter</code> では、値のクォート処理を補助するためのメソッドを 2 つ
            (元となる PDO オブジェクト経由で) 提供しています。
        </p>
<p>
            ひとつめは <code class="code">quote()</code> メソッドです。
            これは、データベースアダプタにあわせた適切な形式に、
            スカラー値をクォートします。配列をクォートしようとすると、
            配列の値をカンマ区切りの文字列に展開して返します。
            その際に個々の値は適切にクォートされます
            (リストパラメータをとる関数などで有用です)。
        </p>
<pre class="programlisting">&lt;?php

// $db オブジェクトを作成します。ここでは Mysql アダプタを使用しているとします。

// スカラーをクォートします
$value = $db-&gt;quote('St John"s Wort');
// $value は '"St John\"s Wort"' となります (クォートで囲まれていることに注意しましょう)

// 配列をクォートします
$value = $db-&gt;quote(array('a', 'b', 'c');
// $value は '"a", "b", "c"' (カンマ区切りの文字列) となります

?&gt;</pre>
<p>
            ふたつめが <code class="code">quoteInto()</code> メソッドです。
            疑問符のプレースホルダを使用した文字列を用意し、
            スカラーあるいは配列をクォートしたものをそこに代入します。
            これは、クエリや条件を動的に作成する場合に有用です。
            スカラーおよび配列の動作は <code class="code">quote()</code>
            メソッドとまったく同じです。
        </p>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成します。ここでは Mysql アダプタを使用しているとします。

// スカラーをクォートして WHERE 句に使用します
$where = $db-&gt;quoteInto('id = ?', 1);
// $where は 'id = "1"' となります (クォートで囲まれていることに注意しましょう)

// 配列をクォートして WHERE 句に使用します
$where = $db-&gt;quoteInto('id IN(?)', array(1, 2, 3));
// $where は 'id IN("1", "2", "3")' (カンマ区切りの文字列) となります

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.queries"></a>9.1.3. クエリを直接実行する</h3></div></div></div>
<p>
            <code class="code">Zend_Db_Adapter</code> のインスタンスを作成すると、
            SQL を直接使用したクエリを実行することができます。
            <code class="code">Zend_Db_Adapter</code> が、元になっている PDO
            オブジェクトにクエリを渡し、準備と実行を行い、その結果を
            PDOStatement オブジェクトとして返します。もし結果が存在すれば、
            それを操作することが可能です。
        </p>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成し、適切にクォートした SQL 文で
// データベースに問い合わせます
$sql = $db-&gt;quoteInto(
    'SELECT * FROM example WHERE date &gt; ?',
    '2006-01-01'
);
$result = $db-&gt;query($sql);

// PDOStatement の $result から、すべての行を配列形式で取得します
$rows = $result-&gt;fetchAll();

?&gt;</pre>
<p>
            クエリに対して、データを自動的にバインドすることもできます。
            つまり、名前つきのプレースホルダをクエリに設定したうえで、
            そのプレースホルダを置き換えるデータを配列として渡すということです。
            置き換える際にデータが適切にクォートされるので、
            SQL インジェクション攻撃に対してより安全になります。
        </p>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成し、データベースに問い合わせます。
// 今回はプレースホルダのバインドを使用します。
$result = $db-&gt;query(
    'SELECT * FROM example WHERE date &gt; :placeholder',
    array('placeholder' =&gt; '2006-01-01')
);

// PDOStatement の $result から、すべての行を配列形式で取得します
$rows = $result-&gt;fetchAll();

?&gt;</pre>
<p>
            状況によっては、準備したデータを SQL に手動でバインドしたいこともあるでしょう。
            そのためには、<code class="code">prepare()</code> メソッドを使用して
            <code class="code">PDOStatement</code> を準備し、それを直接手動で操作します。
        </p>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成し、データベースに問い合わせます。
// 今回は PDOStatement を用意して手動でバインドします。
$stmt = $db-&gt;prepare('SELECT * FROM example WHERE date &gt; :placeholder');
$stmt-&gt;bindValue('placeholder', '2006-01-01');
$stmt-&gt;execute();

// PDOStatement の $result から、すべての行を配列形式で取得します
$rows = $stmt-&gt;fetchAll();

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.transactions"></a>9.1.4. トランザクション</h3></div></div></div>
<p>
            デフォルトでは、PDO は (つまり <code class="code">Zend_Db_Adapter</code> も)
            「自動コミット」モードで動作します。
            これは、すべてのクエリは実行した時点でコミットされるということを意味します。
            トランザクションを使用したい場合には、単純に
            <code class="code">beginTransaction()</code> メソッドをコールします。
            その後に変更内容を <code class="code">commit()</code> あるいは <code class="code">rollBack()</code>
            します。<code class="code">beginTransaction()</code> が再びコールされるまで、
            <code class="code">Zend_Db_Adapter</code> は自動コミットモードに戻ります。
        </p>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成し、トランザクションを開始します。
$db-&gt;beginTransaction();

// クエリを実行します。
// 成功した場合には変更内容をコミットし、
// 失敗した場合にはロールバックします。
try {
    $db-&gt;query(...);
    $db-&gt;commit();
} catch (Exception $e) {
    $db-&gt;rollBack();
    echo $e-&gt;getMessage();
}

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.insert"></a>9.1.5. 行の挿入</h3></div></div></div>
<p>
            <code class="code">insert()</code> メソッドを使用すると、
            INSERT 文の作成および挿入するデータのバインドを行ってくれます
            (バインドされるデータは自動的にクォートされるので、
            SQL インジェクション攻撃への対策として有用です)。
        </p>
<p>
            返される値は、追加した行の ID では<span class="emphasis"><em>ありません</em></span>。
            テーブルには自動インクリメントのカラムがないからです。そのかわりに、
            変更された行の数 (通常は 1) が返されます。追加された行の ID
            を知りたい場合は、<code class="code">lastInsertId()</code> メソッドをコールします。
        </p>
<pre class="programlisting">&lt;?php
    
//
// INSERT INTO round_table
//     (noble_title, first_name, favorite_color)
//     VALUES ("King", "Arthur", "blue");
//

// $db オブジェクトを作成し、そして
// 挿入する行のデータを カラム名 =&gt; 値 形式にします
$row = array (
    'noble_title'    =&gt; 'King',
    'first_name'     =&gt; 'Arthur',
    'favorite_color' =&gt; 'blue',
);

// 行を挿入するテーブル
$table = 'round_table';

// 行を挿入し、その行の ID を取得します
$rows_affected = $db-&gt;insert($table, $row);
$last_insert_id = $db-&gt;lastInsertId();

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.update"></a>9.1.6. 行の更新</h3></div></div></div>
<p>
            <code class="code">update()</code> メソッドを使用すると、
            UPDATE 文の作成および更新するデータのバインドを行ってくれます
            (バインドされるデータは自動的にクォートされるので、
            SQL インジェクション攻撃への対策として有用です)。
        </p>
<p>
            オプションで WHERE 句を指定することで、どの行を更新するのかを指定できます
            (WHERE 句はバインドパラメータではないことに注意しましょう。
            値のクォートは自分で行う必要があります)。
        </p>
<pre class="programlisting">&lt;?php
    
//
// UPDATE round_table
//     SET favorite_color = "yellow"
//     WHERE first_name = "Robin";
//

// $db オブジェクトを作成し、そして
// 更新する新しいデータを カラム名 =&gt; 値 形式にします
$set = array (
    'favorite_color' =&gt; 'yellow',
);

// 更新するテーブル
$table = 'round_table';

// WHERE 句
$where = $db-&gt;quoteInto('first_name = ?', 'Robin');

// テーブルを更新し、更新された行数を取得します
$rows_affected = $db-&gt;update($table, $set, $where);

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.delete"></a>9.1.7. 行の削除</h3></div></div></div>
<p>
            <code class="code">delete()</code> メソッドを使用すると、
            DELETE 文の作成を行ってくれます。オプションで WHERE
            句を指定することで、どの行を削除するのかを指定できます
            (WHERE 句はバインドパラメータではないことに注意しましょう。
            値のクォートは自分で行う必要があります)。
        </p>
<pre class="programlisting">&lt;?php
    
//
// DELETE FROM round_table
//     WHERE first_name = "Patsy";
//

// $db オブジェクトを作成し、そして
// データを削除するテーブルを指定します
$table = 'round_table';

// WHERE 句
$where = $db-&gt;quoteInto('first_name = ?', 'Patsy');

// テーブルを更新し、更新された行数を取得します
$rows_affected = $db-&gt;delete($table, $where);

?&gt;</pre>
</div>
<div class="sect2" lang="ja">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.db.adapter.fetch"></a>9.1.8. 行の取得</h3></div></div></div>
<p>
            <code class="code">query()</code> メソッドを使用してデータベースに直接問い合わせることもできますが、
            普通は単に行を選択して結果を取得できれば十分でしょう。
            それを行うのが <code class="code">fetch*()</code> 系のメソッドです。
            <code class="code">fetch*()</code> 系のメソッドに対しては、SQL の SELECT 文を渡します。
            もし文の中で名前つきプレースホルダを使用した場合は、
            そこにバインドする値も配列として渡します。
            この値は、クォート処理を行ったあとで文中のプレースホルダと置き換えられます。
            <code class="code">fetch*()</code> 系のメソッドには以下のようなものがあります。
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p><code class="code">fetchAll()</code></p></li>
<li><p><code class="code">fetchAssoc()</code></p></li>
<li><p><code class="code">fetchCol()</code></p></li>
<li><p><code class="code">fetchOne()</code></p></li>
<li><p><code class="code">fetchPairs()</code></p></li>
<li><p><code class="code">fetchRow()</code></p></li>
</ul></div>
<pre class="programlisting">&lt;?php
    
// $db オブジェクトを作成し、そして

// すべての行のすべてのカラムを配列として取得します
$result = $db-&gt;fetchAll(
    "SELECT * FROM round_table WHERE noble_title = :title",
    array('title' =&gt; 'Sir')
);

// すべての行のすべてのカラムを連想配列として取得します
// 最初のカラムが配列のキーとして使用されます
$result = $db-&gt;fetchAssoc(
    "SELECT * FROM round_table WHERE noble_title = :title",
    array('title' =&gt; 'Sir')
);

// すべての行の最初のカラムを取得します
$result = $db-&gt;fetchCol(
    "SELECT first_name FROM round_table WHERE noble_title = :title",
    array('title' =&gt; 'Sir')
);

// 最初の値のみを取得します
$result = $db-&gt;fetchOne(
    "SELECT COUNT(*) FROM round_table WHERE noble_title = :title",
    array('title' =&gt; 'Sir')
);

// キーと値の組み合わせを順に取得します。最初のカラムが
// 配列のキー、2 番目のカラムが配列の値となります
$result = $db-&gt;fetchPairs(
    "SELECT first_name, favorite_color FROM round_table WHERE noble_title = :title",
    array('title' =&gt; 'Sir')
);

// 返される最初の行のみを取得します
$result = $db-&gt;fetchRow(
    "SELECT * FROM round_table WHERE first_name = :name",
    array('name' =&gt; 'Lancelot')
);

?&gt;</pre>
</div>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.date.constants.html">前のページ</a> </td>
<td width="20%" align="center"> </td>
<td width="40%" align="right"> <a accesskey="n" href="zend.db.profiler.html">次のページ</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">8.5. 日付関数全般用の定数 </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">ホーム</a></td>
<td width="40%" align="right" valign="top"> 9.2. Zend_Db_Profiler</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
